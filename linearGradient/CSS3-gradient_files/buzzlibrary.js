!function(e,t){e.Buzzoola=e.Buzzoola||{},e.Buzzoola.version={hash:"b1b7639d35079d8081039404cbf8cc10d5c11713",timestamp:1539248968834}}(window,document),function(){var indexOf=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},slice=[].slice;!function(e,t){var i,n,r,o;if(i={Modules:{Mixins:{},Widgets:{Player:{Modules:{}},TGB:{Modules:{Landing:{}}},Scroller:{Modules:{}},Maxiscroll:{Modules:{}},Carousel:{Modules:{}},Clickunder:{Modules:{}},Showcase:{Modules:{}}}},Is:{}},e.Buzzoola=e.Buzzoola||{},Buzzoola.utils)return Buzzoola.utils.extend(Buzzoola,i);r=[];for(n in i)o=i[n],r.push(Buzzoola[n]=o);return r}(window,document),function(w,d,b){var base,hidden,hiddenPrefix,j,k,lastWindow,len,len1,logs,method,pageVisibilityListeners,prefix,ref,ref1,ref2,ref3,ref4,utils,visibilityChange;for(hidden=void 0,visibilityChange=void 0,hiddenPrefix=["","moz","ms","webkit"],pageVisibilityListeners=(null!=(ref=b.utils)?ref.__pageVisibilityListeners:void 0)||{},lastWindow=void 0,j=0,len=hiddenPrefix.length;j<len;j++)if(prefix=hiddenPrefix[j],"undefined"!=typeof d[prefix+"hidden"]){hidden=""+prefix+(prefix?"H":"h")+"idden",visibilityChange=prefix+"visibilitychange";break}if(utils={loadedStylesheets:null!=(ref1=null!=(ref2=b.utils)?ref2.loadedStylesheets:void 0)?ref1:[],embededStyles:null!=(ref3=null!=(ref4=b.utils)?ref4.embededStyles:void 0)?ref3:[],__pageVisibilityListeners:pageVisibilityListeners,add_event_listener:function(e,t,i){return i=i||w,i.addEventListener?i.addEventListener(e,t,!1):i.attachEvent("on"+e,t)},remove_event_listener:function(e,t,i){return i=i||w,i.removeEventListener?i.removeEventListener(e,t,!1):i.detachEvent("on"+e,t)},add_page_visibility_listener:function(e){var t,i;return"undefined"==typeof document.addEventListener||"undefined"==typeof document[hidden]?(t=function(){return setTimeout(function(){if(d.activeElement===d.body&&!d.hasFocus())return e("hidden")},50)},utils.add_event_listener("blur",t)):(t=function(){return e(d[hidden]?"hidden":"visible")},utils.add_event_listener(visibilityChange,t,d)),i=Math.round(1e6*Math.random()),pageVisibilityListeners[i]=t,i},remove_page_visibility_listener:function(e){var t;if(t=pageVisibilityListeners[e])return"undefined"==typeof document.addEventListener||"undefined"==typeof document[hidden]?utils.remove_event_listener("blur",t):utils.remove_event_listener(visibilityChange,t,d)},throttle:function(e,t){var i;return i=!1,function(){if(!i)return e.call(),i=!0,setTimeout(function(){i=!1},t)}},is_child:function(e,t){var i;if(!e||!t)return!1;for(i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1},add_class:function(e,t){var i;if(t&&null!=t.className){if(i=t.className,i.indexOf(e)!==-1)return;return i+=" "+e,t.className=i}},remove_class:function(e,t){var i,n;if(t&&null!=t.className)return i=t.className,n=new RegExp("(\\s|^)"+e,"g"),i=i.replace(n,""),t.className=i},add_stylesheet:function(e){var t,i,n;if(!(indexOf.call(b.utils.loadedStylesheets,e)>=0))return t=function(t,i){var n,r,o;if(null==i&&(i=!1),o=function(){try{return t.sheet.cssRules&&!t.sheet.cssRules.length}catch(e){if(n=e,"SecurityError"!==n.name)throw n;return!1}}(),(i||o)&&(r=b.utils.loadedStylesheets.indexOf(e),r!==-1))return b.utils.loadedStylesheets.splice(r,1)},b.utils.loadedStylesheets.push(e),i=document.head,n=document.createElement("link"),n.onload=function(){return t(this)},n.onerror=function(){return t(this,!0)},n.type="text/css",n.rel="stylesheet",n.href=e,i.appendChild(n)},XHR:w.XDomainRequest||w.XMLHttpRequest,JSON:w.JSON||{parse:function(str){var jsp;return""===str&&(str='""'),jsp={},eval("jsp="+str+";"),jsp}},load_template:function(e,t){var i;i=new utils.XHR,i.onload=function(){var e,t,n,r,o;for(t=i.responseText,e=document.createElement("div"),e.innerHTML=t,r=e.querySelectorAll("script"),n=0;n<r.length;)o=r[n].getAttribute("src"),console.log(o),n++},i.open("GET",e),i.send()},debounce:function(e,t,i){var n;return n=void 0,function(){var r,o,s,a;s=this,r=arguments,a=function(){n=null,i||e.apply(s,r)},o=i&&!n,clearTimeout(n),n=setTimeout(a,t),o&&e.apply(s,r)}},toUnderscore:function(e){return e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})},getNamespaceObj:function(e,t){var i,n,r;if("[object String]"===Object.prototype.toString.call(t))for(n=t.split("."),i=0,r=n.length;i<r&&"undefined"!=typeof e[n[i]];)e=e[n[i]],i++;return e},initModules:function(e,t,i){var n,r,o;o=utils.getNamespaceObj(b.Modules,i);for(r in t)t[r]&&(n=o[r],"undefined"!=typeof n?new n(e):console.log("module "+(i&&i+"."||"")+r+" not found"))},transitionHeight:function(e,t,i){var n;utils.add_class("buzz_transition_height",e),n=function(){if(utils.remove_class("buzz_transition_height",e),i)return i()},setTimeout(function(){var i;"ontransitionend"in w?(i=function(t){t.target===e&&(utils.remove_event_listener("transitionend",i,e),n())},utils.add_event_listener("transitionend",i,e)):setTimeout(n,500),e.style.height=t+"px"},40)},embedScript:function(e,t){var i,n,r,o,s;if(o=d.createElement("script"),o.type="text/javascript",utils.setText(o,e),null!=t?t.appendChild:void 0)return t.appendChild(o);for(s=d.getElementsByTagName("script"),i=0,n=s.length;i<n&&(r=s[i],null!=r?!r.parentNode:!void 0);i++);return(null!=r?r.parentNode:void 0)?r.parentNode.insertBefore(o,r):void 0},loadScript:function(e,t){var i;i=document.createElement("script"),i.onload=function(){if(t)return t()},i.onerror=function(e){if(t)return t(!0)},i.src=e,i.async=!0,d.body.appendChild(i)},getPropertyValue:function(e,t){var i,n,r,o,s,a,l,u;if(e){switch(t){case"width":case"height":return e.getBoundingClientRect&&(a=e.getBoundingClientRect()[t])&&!isNaN(a)?a+"px":(t="client"+t.charAt(0).toUpperCase()+t.slice(1),e[t]+"px")}if(w.getComputedStyle){if(u=(null!=(s=w.getComputedStyle(e,null))?s.getPropertyValue(t):void 0)||0,("-webkit-transform"===t||"transform"===t)&&u)for(l=u.match(/matrix(?:(3d)\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}\d+))(?:, (-{0,1}\d+))(?:, (-{0,1}\d+)), -{0,1}\d+\)|\(-{0,1}\d+(?:, -{0,1}\d+)*(?:, (-{0,1}.+))(?:, (-{0,1}.+))\))/),u=l?"3d"===l[1]?l.slice(2,5):(l.push(0),l.slice(5,8)):[0,0,0],i=r=0,o=u.length;r<o;i=++r)n=u[i],u[i]=parseFloat(n);return u}}},parseXML:function(e){var t;return w.DOMParser?(new w.DOMParser).parseFromString(e,"text/xml"):"undefined"!=typeof w.ActiveXObject&&null!=(t=new window.ActiveXObject("Microsoft.XMLDOM"))?(t.async="false",t.loadXML(e),t):null},loadHtml:function(e,t){utils.loadXHR(e,function(e,i){if(t)return t(i)})},loadXHR:function(e,t,i,n,r,o){var s,a,l;null==i&&(i={}),null==n&&(n="GET"),null==r&&(r={}),l=new utils.XHR,l.timeout&&(l.timeout=15e3),l.onload=function(){t&&t(l.status>=400,l.response||l.responseText,l)},l.onerror=function(){t&&t(!0,l.response||l.responseText,l)},l.onprogress=function(){},l.ontimeout=function(){t&&t(!0,l.response||l.responseText,l)},l.open(n,e,!0);for(s in i)a=i[s],l[s]=a;if(null!=l.setRequestHeader)for(s in r)a=r[s],l.setRequestHeader(s,a);return l.send(o),l},loadExtra:function(e,t){var i;return 2===b.utils.extraLibState?t():(null==(i=b.utils).extraLibCallbacks&&(i.extraLibCallbacks=[]),b.utils.extraLibCallbacks.push(t),0===b.utils.extraLibState?(b.utils.extraLibState=1,b.utils.loadScript(e,function(e){var t;for(b.utils.extraLibState=e?0:2;t=b.utils.extraLibCallbacks.shift();)t(e);return b.utils.extraLibCallbacks=null})):void 0)},loadImage:function(e,t,i){var n;return null==i&&(i=!1),n=document.createElement("img"),n.onerror=function(){if(delete n,t)return t(!0)},n.onload=function(){if(t)return t(!1,n)},i&&n.setAttribute("crossOrigin","anonymous"),n.src=e},extend:function(){var e,t,i,n,r,o,s;for(r=arguments[0],e=2<=arguments.length?slice.call(arguments,1):[],t=0,n=e.length;t<n;t++)if(o=e[t])for(i in o)s=o[i],r[i]=utils.isObject(s)?utils.extend(r[i]||{},s):utils.isArray(s)?s.slice():s;return r},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(fn)},hasFlash:function(){try{return Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){return"undefined"!=typeof navigator.mimeTypes["application/x-shockwave-flash"]}},addStyles:function(e){var t,i;if(!(indexOf.call(b.utils.embededStyles,e)>=0))return b.utils.embededStyles.push(e),t=d.head||d.getElementsByTagName("head")[0],i=d.createElement("style"),i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(d.createTextNode(e)),t.appendChild(i)},setText:function(e,t){if(null==t&&(t=""),e)return e.innerText?e.innerText=t:e.textContent=t},guid:function(){var e;return e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},openLink:function(e,t){var i,n;return t?w.open(e):b.utils.bowser.ios?(i=d.createElement("a"),i.href=e,i.target="_blank",i.click()):(n=w.open(e,"_target"),(null!=n?n.hasOwnProperty("opener"):void 0)&&(n.opener=null),n.focus())},freeze:function(e,t,i,n){return setTimeout(function(){t.call(n,i)},1e3*e)},stopPropagation:function(e){if(e=e||window.event,e.cancelBubble=!0,e.stopPropagation)return e.stopPropagation()},getProtocol:function(){var e,t;return e=(null!=(t=b.utils.getLastWindow())?t:w).location.protocol,["https:","about:","javascript:"].indexOf(e)!==-1?"https:":"http:"},getLastWindow:function(){var e,t;if(null!=lastWindow)return lastWindow;for(t=["about:","javascript:"],e=w;t.indexOf(e.location.protocol)!==-1&&e.parent!==e&&e.parent;)e=e.parent;return lastWindow=e},getTopWindow:function(e){var t,i,n,r,o,s;return null==e&&(e=!1),n=function(){var e;try{return w.top.location.href}catch(i){return t=i,r=w.location.ancestorOrigins,null!=(e=null!=r?r[r.length-1]:void 0)?e:null}}(),n||(n=w!==w.top&&(null!=(o=d.referrer)?o.length:void 0)>0?d.referrer:(null!=(s=b.utils.getLastWindow())?s:w).location.href),e&&(i=n.indexOf("?"))!==-1&&(n=n.slice(0,i)),n},getCurrentFrame:function(e){var t,i,n;null==e&&(e=w);try{return t=e.parent.document,n=Array.prototype.slice.call(t.querySelectorAll("iframe")),n.filter(function(t){return t.contentWindow===e})[0]}catch(r){return i=r,null}},getCookie:function(e){var t,i;if(navigator.cookieEnabled)return t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")),i=t?decodeURIComponent(t[1]):void 0},setCookie:function(e,t,i){var n,r,o,s;if(navigator.cookieEnabled){i=i||{},n=i.expires,"number"==typeof n&&n&&(d=new Date,d.setTime(d.getTime()+1e3*n),n=i.expires=d),n&&n.toUTCString&&(i.expires=n.toUTCString()),t=encodeURIComponent(t),s=e+"="+t;for(r in i)s+="; "+r,o=i[r],o!==!0&&(s+="="+o);document.cookie=s}},deleteAllCookies:function(){var e,t,i,n,r;if(navigator.cookieEnabled)for(t=document.cookie.split(";"),n=0;n<t.length;)e=t[n],i=e.indexOf("="),r=i>-1?e.substr(0,i):e,document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT",n++}},b.utils=utils.extend(b.utils||{},utils),null==(base=b.utils).extraLibState&&(base.extraLibState=0),d.querySelectorAll||(d.querySelectorAll=function(e){var t,i,n;for(n=d.createElement("style"),i=[],t=void 0,d.documentElement.firstChild.appendChild(n),d._qsa=[],n.styleSheet.cssText=e+" {x-qsa:expression(d._qsa && d._qsa.push(this))}",window.scrollBy(0,0),n.parentNode.removeChild(n);d._qsa.length;)t=d._qsa.shift(),t.style.removeAttribute("x-qsa"),i.push(t);return d._qsa=null,i}),d.querySelector||(d.querySelector=function(e){var t;return t=d.querySelectorAll(e),t.length?t[0]:null}),Function.prototype.bind&&window.console&&"object"==typeof console.log)for(logs=["log","info","warn","error","assert","dir","clear","profile","profileEnd"],k=0,len1=logs.length;k<len1;k++)method=logs[k],console[method]=Function.prototype.call.bind(console[method],console)}(window,document,window.Buzzoola=window.Buzzoola||{})}.call(this),function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";function n(e,t,i){}function r(e,t,i){Object.defineProperty(e,t,{writable:!1,configurable:!1,value:i})}var o=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],s=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],a=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"],l=["setAdVolume"];n.prototype.handshakeVersion=function(e,t){},n.prototype.initAd=function(e,t,i,n,r,o,s){},n.prototype.startAd=function(e){},n.prototype.stopAd=function(e){},n.prototype.skipAd=function(e){},n.prototype.resizeAd=function(e,t,i,n){},n.prototype.pauseAd=function(e){},n.prototype.resumeAd=function(e){},n.prototype.expandAd=function(e){},n.prototype.collapseAd=function(e){},n.prototype.subscribe=function(e,t,i){},n.prototype.unsubscribe=function(e,t){},n.prototype.getAdLinear=function(e){},n.prototype.getAdWidth=function(e){},n.prototype.getAdHeight=function(e){},n.prototype.getAdExpanded=function(e){},n.prototype.getAdSkippableState=function(e){},n.prototype.getAdRemainingTime=function(e){},n.prototype.getAdDuration=function(e){},n.prototype.getAdVolume=function(e){},n.prototype.getAdCompanions=function(e){},n.prototype.getAdIcons=function(e){},n.prototype.setAdVolume=function(e,t){},r(n,"METHODS",o),r(n,"GETTERS",a),r(n,"SETTERS",l),r(n,"EVENTS",s);var u=o.filter(function(e){return["skipAd"].indexOf(e)===-1});r(n,"checkVPAIDInterface",function(e){var t=u.every(function(t){return"function"==typeof e[t]});return t}),t.exports=n},{}],2:[function(e,t,i){"use strict";function n(e,t,i,n){this._isValid=c(e),this._isValid&&(this._creative=e,this._el=t,this._videoEl=i,this._iframe=n,this._subscribers=new u,r.call(this))}function r(){if(f.forEach(function(e){this._creative.subscribe(s.bind(this,e),e)}.bind(this)),this._creative.subscribe(o.bind(this),p),this._videoEl){var e=this._iframe.contentDocument.documentElement,t=this._videoEl;e.addEventListener("click",function(i){i.target===e&&t.click()})}}function o(e,t,i){this._subscribers.triggerSync(p,{url:e,id:t,playerHandles:i})}function s(e){this._subscribers.trigger(e,Array.prototype.slice(arguments,1))}function a(e,t,i,n){e?e(i,n):i&&t.trigger(h,i)}var l=e("./IVPAIDAdUnit"),u=e("./subscriber"),c=l.checkVPAIDInterface,d=e("./utils"),h=(l.METHODS,"AdError"),p="AdClickThru",f=l.EVENTS.filter(function(e){return e!=p});n.prototype=Object.create(l.prototype),n.prototype.isValidVPAIDAd=function(){return this._isValid},l.METHODS.forEach(function(e){var t=["subscribe","unsubscribe","initAd","startAd"];t.indexOf(e)===-1&&(n.prototype[e]=function(){var t=l.prototype[e].length,i=Array.prototype.slice.call(arguments),n=t===i.length?i.pop():void 0;setTimeout(function(){var t,r=null;try{t=this._creative[e].apply(this._creative,i)}catch(o){r=o}a(n,this._subscribers,r,t)}.bind(this),0)})}),n.prototype.initAd=function(e,t,i,n,r,o,s){r=r||{},o=d.extend({slot:this._el,videoSlot:this._videoEl},o||{}),setTimeout(function(){var l;try{this._creative.initAd(e,t,i,n,r,o)}catch(u){l=u}a(s,this._subscribers,l)}.bind(this),0)},n.prototype.startAd=function(){var e,t=l.prototype.startAd.length,i=Array.prototype.slice.call(arguments),n=t===i.length?i.pop():void 0,r=null;try{e=this._creative.startAd.apply(this._creative,i)}catch(o){r=o}setTimeout(function(){a(n,this._subscribers,r,e)}.bind(this),0)},n.prototype.subscribe=function(e,t,i){this._subscribers.subscribe(t,e,i)},n.prototype.unsubscribe=function(e,t){this._subscribers.unsubscribe(t,e)},n.prototype.on=n.prototype.subscribe,n.prototype.off=n.prototype.unsubscribe,l.GETTERS.forEach(function(e){n.prototype[e]=function(t){setTimeout(function(){var i,n=null;try{i=this._creative[e]()}catch(r){n=r}a(t,this._subscribers,n,i)}.bind(this),0)}}),n.prototype.setAdVolume=function(e,t){setTimeout(function(){var i,n=null;try{this._creative.setAdVolume(e),i=this._creative.getAdVolume()}catch(r){n=r}n||(n=d.validate(i===e,"failed to apply volume: "+e)),a(t,this._subscribers,n,i)}.bind(this),0)},n.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()},t.exports=n},{"./IVPAIDAdUnit":1,"./subscriber":4,"./utils":5}],3:[function(e,t,i){"use strict";function n(e,t,i,n){i=i||{},this._id=h(),this._destroyed=!1,this._frameContainer=d.createElementInEl(e,"div"),this._videoEl=t,this._vpaidOptions=n||{timeout:1e4},this._templateConfig={template:i.template||f,extraOptions:i.extraOptions||{}}}function r(e){var t=this[e];t&&(t.remove(),delete this[e])}function o(){a.call(this),delete this._adUnit}function s(){a.call(this),u.call(this)}function a(){r.call(this,"_frame"),l.call(this)}function l(){this._onLoad&&(window.removeEventListener("message",this._onLoad),d.clearCallbackTimeout(this._onLoad),delete this._onLoad)}function u(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}function c(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}var d=e("./utils"),h=d.unique("vpaidIframe"),p=e("./VPAIDAdUnit"),f="<body onload=\"var js = document.createElement('script');js.src = '{{iframeURL_JS}}';";f+="js.addEventListener('load', function() { window.parent.postMessage(JSON.stringify({id: '{{iframeID}}'}), '*'); }); document.body.appendChild(js)\" >",f+='<div class="ad-element"></div></body>';var m="AdStopped";n.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,s.call(this))},n.prototype.isDestroyed=function(){return this._destroyed},n.prototype.loadAdUnit=function(e,t){function i(e){if(e.origin===window.location.origin){var i;try{i=JSON.parse(e.data)}catch(e){return console.debug(e)}if(i.id===this.getID()){var n,r,s;if(this._frame.contentWindow?(s=this._frame.contentWindow.getVPAIDAd,r=d.validate("function"==typeof s,"the ad didn't return a function to create an ad")):r="the iframe is not anymore in the DOM tree",!r){var a=this._frame.contentWindow.document.querySelector(".ad-element");n=new p(s(),a,this._videoEl,this._frame),n.subscribe(m,o.bind(this)),r=d.validate(n.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return this._adUnit=n,l.call(this),t(r,r?null:n),!0}}}function n(){t("timeout",null)}c.call(this),s.call(this);var r=d.createIframeWithContent(this._frameContainer,this._templateConfig.template,d.extend({iframeURL_JS:e,iframeID:this.getID()},this._templateConfig.extraOptions));this._frame=r,this._onLoad=d.callbackTimeout(this._vpaidOptions.timeout,i.bind(this),n.bind(this)),Buzzoola.utils.add_event_listener("message",this._onLoad)},n.prototype.unloadAdUnit=function(){s.call(this)},n.prototype.getID=function(){return this._id},t.exports=n,window.VPAIDHTML5Client=n},{"./VPAIDAdUnit":2,"./utils":5}],4:[function(e,t,i){"use strict";function n(){this._subscribers={}}n.prototype.subscribe=function(e,t,i){this.get(t).push({handler:e,context:i})},n.prototype.unsubscribe=function(e,t){this._subscribers[t]=this.get(t).filter(function(t){return e===t.handler})},n.prototype.unsubscribeAll=function(){this._subscribers={}},n.prototype.trigger=function(e,t){var i=this;i.get(e).forEach(function(n){setTimeout(function(){i.get(e)&&n.handler.call(n.context,t)},0)})},n.prototype.triggerSync=function(e,t){this.get(e).forEach(function(e){e.handler.call(e.context,t)})},n.prototype.get=function(e){return this._subscribers[e]||(this._subscribers[e]=[]),this._subscribers[e]},t.exports=n},{}],5:[function(e,t,i){"use strict";function n(){}function r(e,t){return e?null:new Error(t)}function o(e){var t=f[e];t&&(clearTimeout(t),delete f[e])}function s(e,t,i){var r,s;return s=setTimeout(function(){t=n,delete s[r],i()},e),r=function(){t.apply(this,arguments)&&o(r)},f[r]=s,r}function a(e,t,i){var n=document.createElement(t);return i&&(n.id=i),e.appendChild(n),n}function l(e,t,i){var n=u(e);if(d(n,c(t,i)))return n}function u(e,t){var i=document.createElement("iframe");return i.src=t||"javascript:false",i.marginWidth="0",i.marginHeight="0",i.frameBorder="0",i.width="100%",i.height="100%",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.margin="0px",i.style.padding="0px",i.style.border="none",i.setAttribute("SCROLLING","NO"),e.innerHTML="",e.appendChild(i),i}function c(e,t){return Object.keys(t).forEach(function(i){var n="object"==typeof n?JSON.stringify(t[i]):t[i];e=e.replace(new RegExp("{{"+i+"}}","g"),n)}),e}function d(e,t){var i=e.contentDocument||e.contentWindow&&e.contentWindow.document;if(!i)return!1;var n=function(){i.open(),i.write(t),i.close()};return n(),!0}function h(e,t){return Object.keys(t).forEach(function(i){e[i]=t[i]}),e}function p(e){var t=-1;return function(){return e+"_"+ ++t}}var f={};t.exports={noop:n,validate:r,clearCallbackTimeout:o,callbackTimeout:s,createElementInEl:a,createIframeWithContent:l,createIframe:u,simpleTemplate:c,setIframeContent:d,extend:h,unique:p}},{}],6:[function(e,t,i){window.Buzzoola.utils.VPAIDHTML5Client=e("vpaid-html5-client/js/VPAIDHTML5Client.js")},{"vpaid-html5-client/js/VPAIDHTML5Client.js":3}]},{},[6]),!function(e){window.Buzzoola=window.Buzzoola||{},window.Buzzoola.utils=window.Buzzoola.utils||{},(window.Buzzoola.utils.airbrakeJs||(window.Buzzoola.utils.airbrakeJs={})).Client=e()}(function(){return function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return r(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t){(function(i){var n,r,o,s;e("./internal/compat"),s=e("./internal/merge"),r=e("./internal/promise"),o=function(e){return function(t,i,n,r,o){return e.notify(o?o:{error:{message:t,fileName:i,lineNumber:n,columnNumber:r||0}})}},n=function(){function t(t){var n;null==t&&(t={}),this._projectId=t.projectId||0,this._projectKey=t.projectKey||"",this._host=t.host||"https://api.airbrake.io",this._processor=null,this._reporters=[],this._filters=[],this._processor=void 0!==t.processor?t.processor:e("./processors/stack"),void 0!==t.reporter?this.addReporter(t.reporter):(n="withCredentials"in new i.XMLHttpRequest?"compat":"jsonp",this.addReporter(n)),this.addFilter(e("./internal/default_filter"))}return t.prototype.setProject=function(e,t){return this._projectId=e,this._projectKey=t},t.prototype.setHost=function(e){return this._host=e},t.prototype.addContext=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addContext is deprecated, please use addFilter"),this.addFilter(function(t){return t.context=s({},e,t.context),t})},t.prototype.setEnvironmentName=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: setEnvironmentName is deprecated, please use addFilter"),this.addFilter(function(t){return null==t.context.environment&&(t.context.environment=e),t})},t.prototype.addParams=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addParams is deprecated, please use addFilter"),this.addFilter(function(t){return t.params=s({},e,t.params),t})},t.prototype.addEnvironment=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addEnvironment is deprecated, please use addFilter"),this.addFilter(function(t){return t.environment=s({},e,t.environment),t})},t.prototype.addSession=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addSession is deprecated, please use addFilter"),this.addFilter(function(t){return t.session=s({},e,t.session),t})},t.prototype.addReporter=function(t){switch(t){case"compat":t=e("./reporters/compat");break;case"xhr":t=e("./reporters/xhr");break;case"jsonp":t=e("./reporters/jsonp")}return this._reporters.push(t)},t.prototype.addFilter=function(e){return this._filters.push(e)},t.prototype.notify=function(e){var t,n,o;return t={language:"JavaScript",sourceMapEnabled:!0},(null!=(o=i.navigator)?o.userAgent:void 0)&&(t.userAgent=i.navigator.userAgent),i.location&&(t.url=String(i.location),t.rootDirectory=i.location.protocol+"//"+i.location.host),n=new r,this._processor(e.error||e,function(i){return function(r,o){var a,l,u,c,d,h,p,f,m,v,g;for(p={errors:[o],context:s(t,e.context),params:e.params||{},environment:e.environment||{},session:e.session||{}},p.context.notifier={name:"airbrake-js-"+r,version:"0.5.8",url:"https://github.com/airbrake/airbrake-js"},m=i._filters,l=0,c=m.length;c>l;l++){if(a=m[l],h=a(p),null===h||h===!1)return;null!=h.errors?p=h:"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: filter must return notice or null to ignore the notice")}for(f={projectId:i._projectId,projectKey:i._projectKey,host:i._host},v=i._reporters,u=0,d=v.length;d>u;u++)(g=v[u])(p,f,n)}}(this)),n},t.prototype.push=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: push is deprecated, please use notify"),this.notify(e)},t.prototype._wrapArguments=function(e){var t,i,n,r;for(i=n=0,r=e.length;r>n;i=++n)t=e[i],"function"==typeof t&&(e[i]=this.wrap(t));return e},t.prototype.wrap=function(e){var t,i,n;if(e.__airbrake__)return e;n=this,t=function(){var t,i;t=n._wrapArguments(arguments);try{return e.apply(this,t)}catch(r){return i=r,t=Array.prototype.slice.call(arguments),n.notify({error:i,params:{arguments:t}}),null}};for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t.__airbrake__=!0,t.__inner__=e,t},t}(),t.exports=n}).call(this,window)},{"./internal/compat":2,"./internal/default_filter":3,"./internal/merge":5,"./internal/promise":6,"./processors/stack":8,"./reporters/compat":9,"./reporters/jsonp":10,"./reporters/xhr":11}],2:[function(){var e;null==(e=Array.prototype).indexOf&&(e.indexOf=function(e,t){var i,n,r,o;for(t=t||0,i=n=r=t,o=this.length;o>=r?o>n:n>o;i=o>=r?++n:--n)if(this[i]===e)return i;return-1})},{}],3:[function(e,t){var i,n,r=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};i=["Script error","Script error."],n=function(e){var t;return t=e.errors[0].message,r.call(i,t)>=0?null:e},t.exports=n},{}],4:[function(e,t){var i,n,r;n=e("./truncate"),r=function(e,t){var i,r;null==t&&(t=1e3),i={};for(r in e)i[r]=n(e[r],t=t);return i},i=function(e,t,i){var n,o;for(null==t&&(t=1e3),null==i&&(i=64e3);;){if(e.params=r(e.params,t=t),e.environment=r(e.environment,t=t),e.session=r(e.session,t=t),o=JSON.stringify(e),o.length<i)return o;if(0===t)break;t=Math.floor(t/2)}throw n=new Error("airbrake-js: cannot jsonify notice (length="+o.length+" maxLength="+i+")"),n.params={json:o.slice(0,+Math.floor(t/2)+1||9e9)+"..."},n},t.exports=i},{"./truncate":7}],5:[function(e,t){var i;i=function(){var e,t,i,n,r,o;for(o=Array.prototype.slice.call(arguments),e=o.shift()||{},t=0,n=o.length;n>t;t++){r=o[t];for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},t.exports=i},{}],6:[function(e,t){var i;i=function(){function e(e){var t,i;this._onResolved=[],this._onRejected=[],i=function(e){return function(){return e.resolve.apply(e,arguments)}}(this),t=function(e){return function(){return e.reject.apply(e,arguments)}}(this),null!=e&&e(i,t)}return e.prototype.then=function(e,t){return e&&(null!=this._resolvedWith&&e(this._resolvedWith),this._onResolved.push(e)),t&&(null!=this._rejectedWith&&t(this._resolvedWith),this._onRejected.push(t)),this},e.prototype["catch"]=function(e){return null!=this._rejectedWith&&e(this._rejectedWith),this._onRejected.push(e),this},e.prototype.resolve=function(){var e,t,i,n;for(this._resolvedWith=arguments,n=this._onResolved,t=0,i=n.length;i>t;t++)e=n[t],e.apply(this,this._resolvedWith);return this},e.prototype.reject=function(){var e,t,i,n;for(this._rejectedWith=arguments,n=this._onRejected,t=0,i=n.length;i>t;t++)e=n[t],e.apply(this,this._rejectedWith);return this},e}(),t.exports=i},{}],7:[function(e,t){var i,n;i=function(e,t){var i;try{return e[t]}catch(n){return void(i=n)}},n=function(e,t,n){var r,o,s,a,l;return null==t&&(t=1e3),null==n&&(n=5),a=0,s=[],l=[],o=function(e){var t,n,r,o,a;for(n=l.indexOf(e),o=[s[n]],t=r=a=n;0>=a?0>=r:r>=0;t=0>=a?++r:--r)l[t]&&i(l[t],o[0])===e&&(e=l[t],o.unshift(s[t]));return"~"+o.join(".")},(r=function(e,u,c){var d,h,p,f,m,v;if(null==u&&(u=""),null==c&&(c=0),a++,a>t)return"[Truncated]";if(null===e||void 0===e)return e;switch(typeof e){case"boolean":case"number":case"string":case"function":return e;case"object":break;default:return String(e)}if(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(l.indexOf(e)>=0)return"[Circular "+o(e)+"]";if(c++,c>n)return"[Truncated]";if(s.push(u),l.push(e),a--,"[object Array]"===Object.prototype.toString.apply(e)){for(d=[],p=f=0,m=e.length;m>f&&(h=e[p],a++,!(a>=t));p=++f)d.push(r(h,u=p,c));return d}d={};for(u in e)if(Object.prototype.hasOwnProperty.call(e,u)){if(a++,a>=t)break;v=i(e,u),void 0!==v&&(d[u]=r(v,u=u,c))}return d})(e)},t.exports=n},{}],8:[function(e,t){var i,n,r;n=[{name:"v8",re:/^\s*at\s(.+?)\s\((?:(?:(.+):(\d+):(\d+))|(.+))\)$/,fn:function(e){return{"function":e[1],file:e[2]||e[5],line:e[3]&&parseInt(e[3],10)||0,column:e[4]&&parseInt(e[4],10)||0}}},{name:"firefox30",re:/^(.*)@(.+):(\d+):(\d+)$/,fn:function(e){var t,i,n,r;return n=e[1],i=e[2],t=/^(\S+)\s(line\s\d+\s>\seval.*)$/,(r=i.match(t))&&(n=n.length>0?n+" "+r[2]:r[2],i=r[1]),{"function":n,file:i,line:parseInt(e[3],10),column:parseInt(e[4],10)}}},{name:"firefox14",re:/^(.*)@(.+):(\d+)$/,fn:function(e,t,i){var n;return n=0===t?i.columnNumber||0:0,{"function":e[1],file:e[2],line:parseInt(e[3],10),column:n}}},{name:"v8-short",re:/^\s*at\s(.+):(\d+):(\d+)$/,fn:function(e){return{"function":"",file:e[1],line:parseInt(e[2],10),column:parseInt(e[3],10)}}},{name:"phantomjs",re:/^\s*at\s(.+):(\d+)$/,fn:function(e){return{"function":"",file:e[1],line:parseInt(e[2],10),column:0}}},{name:"default",re:/.+/,fn:function(e){return{"function":e[0],file:"",line:0,column:0}}}],r=/^\S+:\s.+$/,i=function(e,t){var i,o,s,a,l,u,c,d,h,p,f,m,v,g,y;for(f="nostack",v=e.stack||"",d=v.split("\n"),i=[],o=s=0,l=d.length;l>s;o=++s)if(c=d[o],""!==c)for(a=0,u=n.length;u>a;a++)if(m=n[a],h=c.match(m.re)){f=m.name,i.push(m.fn(h,o,e));break}return("v8"===f||"v8-short"===f)&&i.length>0&&i[0]["function"].match(r)&&(i=i.slice(1)),0!==i.length||null==e.fileName&&null==e.lineNumber&&null==e.columnNumber||i.push({"function":"",file:e.fileName||"",line:parseInt(e.lineNumber,10)||0,column:parseInt(e.columnNumber,10)||0}),0!==i.length||null==e.filename&&null==e.lineno&&null==e.column&&null==e.colno||i.push({"function":"",file:e.filename||"",line:parseInt(e.lineno,10)||0,column:parseInt(e.column||e.colno,10)||0}),p=null!=e.message?e.message:String(e),null!=e.name&&""!==e.name?(g=e.name,p=g+": "+p):(y=/^Uncaught\s(.+?):\s.+$/,h=p.match(y),g=h?h[1]:""),t(f,{type:g,message:p,backtrace:i})},t.exports=i},{}],9:[function(e,t){(function(i){var n,r;n=e("../internal/jsonify_notice"),r=function(e,t,r){
var o,s,a;return a=t.host+"/api/v3/projects/"+t.projectId+"/create-notice?key="+t.projectKey,o=n(e),s=new i.XMLHttpRequest,s.open("POST",a,!0),s.send(o),s.onreadystatechange=function(){var t;return 4===s.readyState&&200===s.status?(t=JSON.parse(s.responseText),e.id=t.id,r.resolve(e)):void 0}},t.exports=r}).call(this,window)},{"../internal/jsonify_notice":4}],10:[function(e,t){(function(i){var n,r,o;r=e("../internal/jsonify_notice"),n=0,o=function(e,t,o){var s,a,l,u,c,d,h;return n++,s="airbrakeCb"+String(n),i[s]=function(t){var n;e.id=t.id,o.resolve(e);try{return delete i[s]}catch(r){return n=r,i[s]=void 0}},u=encodeURIComponent(r(e)),h=t.host+"/api/v3/projects/"+t.projectId+"/create-notice?key="+t.projectKey+"&callback="+s+"&body="+u,a=i.document,l=a.getElementsByTagName("head")[0],d=a.createElement("script"),d.src=h,c=function(){return l.removeChild(d)},d.onload=c,d.onerror=c,l.appendChild(d)},t.exports=o}).call(this,window)},{"../internal/jsonify_notice":4}],11:[function(e,t){(function(i){var n,r;n=e("../internal/jsonify_notice"),r=function(e,t,r){var o,s,a;return a=t.host+"/api/v3/projects/"+t.projectId+"/notices?key="+t.projectKey,o=n(e),s=new i.XMLHttpRequest,s.open("POST",a,!0),s.setRequestHeader("Content-Type","application/json"),s.send(o),s.onreadystatechange=function(){var t;return 4===s.readyState&&201===s.status?(t=JSON.parse(s.responseText),e.id=t.id,r.resolve(e)):void 0}},t.exports=r}).call(this,window)},{"../internal/jsonify_notice":4}]},{},[1])(1)}),function(e,t){window.Buzzoola=window.Buzzoola||{},window.Buzzoola.utils=window.Buzzoola.utils||{},window.Buzzoola.utils.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,n,r,o,s,a,l="",u=0;for(e=window.Buzzoola.utils.Base64._utf8_encode(e);u<e.length;)t=e.charCodeAt(u++),i=e.charCodeAt(u++),n=e.charCodeAt(u++),r=t>>2,o=(3&t)<<4|i>>4,s=(15&i)<<2|n>>6,a=63&n,isNaN(i)?s=a=64:isNaN(n)&&(a=64),l=l+this._keyStr.charAt(r)+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(a);return l},decode:function(e){var t,i,n,r,o,s,a,l="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)r=this._keyStr.indexOf(e.charAt(u++)),o=this._keyStr.indexOf(e.charAt(u++)),s=this._keyStr.indexOf(e.charAt(u++)),a=this._keyStr.indexOf(e.charAt(u++)),t=r<<2|o>>4,i=(15&o)<<4|s>>2,n=(3&s)<<6|a,l+=String.fromCharCode(t),64!=s&&(l+=String.fromCharCode(i)),64!=a&&(l+=String.fromCharCode(n));return l=window.Buzzoola.utils.Base64._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",i=0,n=c1=c2=0;i<e.length;)n=e.charCodeAt(i),n<128?(t+=String.fromCharCode(n),i++):n>191&&n<224?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),i+=3);return t}}}(window,document),!function(e,t){window.Buzzoola.utils[e]=t()}("bowser",function(){function e(e){function i(t){var i=e.match(t);return i&&i.length>1&&i[1]||""}function n(t){var i=e.match(t);return i&&i.length>1&&i[2]||""}var r,o=i(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(e),a=!s&&/android/i.test(e),l=i(/edge\/(\d+(\.\d+)?)/i),u=i(/version\/(\d+(\.\d+)?)/i),c=/tablet/i.test(e),d=!c&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?r={name:"Opera",opera:t,version:u||i(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:t,version:u||i(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?(r={name:"Windows Phone",windowsphone:t},l?(r.msedge=t,r.version=l):(r.msie=t,r.version=i(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:t,version:i(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?r={name:"Microsoft Edge",msedge:t,version:l}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:t,version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?(r={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},u&&(r.version=u)):/sailfish/i.test(e)?r={name:"Sailfish",sailfish:t,version:i(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:t,version:i(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(r={name:"Firefox",firefox:t,version:i(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=t)):/silk/i.test(e)?r={name:"Amazon Silk",silk:t,version:i(/silk\/(\d+(\.\d+)?)/i)}:a?r={name:"Android",version:u}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:t,version:i(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",blackberry:t,version:u||i(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(r={name:"WebOS",webos:t,version:u||i(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=t)):r=/bada/i.test(e)?{name:"Bada",bada:t,version:i(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:t,version:i(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||u}:/safari/i.test(e)?{name:"Safari",safari:t,version:u}:{name:i(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(r.name=r.name||"Webkit",r.webkit=t,!r.version&&u&&(r.version=u)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=t,r.version=r.version||i(/gecko\/(\d+(\.\d+)?)/i)),r.msedge||!a&&!r.silk?o&&(r[o]=t,r.ios=t):r.android=t;var h="";r.windowsphone?h=i(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o?(h=i(/os (\d+([_\s]\d+)*) like mac os x/i),h=h.replace(/[_\s]/g,".")):a?h=i(/android[ \/-](\d+(\.\d+)*)/i):r.webos?h=i(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?h=i(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?h=i(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(h=i(/tizen[\/\s](\d+(\.\d+)*)/i)),h&&(r.osversion=h);var p=h.split(".")[0];return c||"ipad"==o||a&&(3==p||4==p&&!d)||r.silk?r.tablet=t:(d||"iphone"==o||"ipod"==o||a||r.blackberry||r.webos||r.bada)&&(r.mobile=t),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.chrome&&r.version>=20||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1?r.a=t:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6?r.c=t:r.x=t,r}var t=!0,i=e("undefined"!=typeof navigator?navigator.userAgent:"");return i.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in i)return!0}return!1},i._detect=e,i}),"document"in self&&("classList"in document.createElement("_")?!function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var i,n=arguments.length;for(i=0;i<n;i++)e=arguments[i],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:i.call(this,e)}}e=null}():!function(e){"use strict";if("Element"in e){var t="classList",i="prototype",n=e.Element[i],r=Object,o=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[i].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},a=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(e,t)},u=function(e){for(var t=o.call(e.getAttribute("class")||""),i=t?t.split(/\s+/):[],n=0,r=i.length;n<r;n++)this.push(i[n]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},c=u[i]=[],d=function(){return new u(this)};if(a[i]=Error[i],c.item=function(e){return this[e]||null},c.contains=function(e){return e+="",l(this,e)!==-1},c.add=function(){var e,t=arguments,i=0,n=t.length,r=!1;do e=t[i]+"",l(this,e)===-1&&(this.push(e),r=!0);while(++i<n);r&&this._updateClassName()},c.remove=function(){var e,t,i=arguments,n=0,r=i.length,o=!1;do for(e=i[n]+"",t=l(this,e);t!==-1;)this.splice(t,1),o=!0,t=l(this,e);while(++n<r);o&&this._updateClassName()},c.toggle=function(e,t){e+="";var i=this.contains(e),n=i?t!==!0&&"remove":t!==!1&&"add";return n&&this[n](e),t===!0||t===!1?t:!i},c.toString=function(){return this.join(" ")},r.defineProperty){var h={get:d,enumerable:!0,configurable:!0};try{r.defineProperty(n,t,h)}catch(p){p.number===-2146823252&&(h.enumerable=!1,r.defineProperty(n,t,h))}}else r[i].__defineGetter__&&n.__defineGetter__(t,d)}}(self)),function(e,t,i){!function(){function e(e){var t=e.__resizeTriggers__;if(t){var i=t.firstElementChild,n=t.lastElementChild;if(i&&n){var r=i.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,r&&(r.style.width=i.offsetWidth+1+"px",r.style.height=i.offsetHeight+1+"px")}}}function t(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function n(i){var n=this;e(this),this.__resizeRAF__&&l(this.__resizeRAF__),this.__resizeRAF__=a(function(){t(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach(function(e){e.call(n,i)}))})}function r(){if(!s){var e=(_?_:"")+".resize-triggers { "+(b?b:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: -1000%; left: -1000%; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i),s=!0}}var o=document.attachEvent,s=!1;if(!o){var a=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),l=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),u=!1,c="animation",d="",h="animationstart",p="Webkit Moz O ms".split(" "),f="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m="",v=document.createElement("fakeelement");if(void 0!==v.style.animationName&&(u=!0),u===!1)for(var g=0;g<p.length;g++)if(void 0!==v.style[p[g]+"AnimationName"]){m=p[g],c=m+"Animation",d="-"+m.toLowerCase()+"-",h=f[g],u=!0;break}var y="resizeanim",_="@"+d+"keyframes "+y+" { from { opacity: 0; } to { opacity: 0; } } ",b=d+"animation: 1ms "+y+"; "}i.utils.add_resize_listener=function(t,i){t&&(o?t.attachEvent("onresize",i):(t.__resizeTriggers__||("static"==(getComputedStyle(t)||{}).position&&(t.style.position="relative"),r(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),e(t),t.addEventListener("scroll",n,!0),h&&t.__resizeTriggers__.addEventListener(h,function(i){i.animationName==y&&e(t)})),t.__resizeListeners__.push(i)))},i.utils.remove_resize_listener=function(e,t){try{e&&(o?e.detachEvent("onresize",t):e.__resizeListeners__&&(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",n,!0),e.__resizeTriggers__&&(e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))))}catch(i){}}}()}(window,document,Buzzoola),window.Buzzoola.utils.makeVideoPlayableInline2=function(){"use strict";function e(e,t,i,n){function r(i){o=t(r,n),e(i-(s||i)),s=i}var o,s;return{start:function(){o||r(0)},stop:function(){i(o),o=null,s=0}}}function t(t){return e(t,requestAnimationFrame,cancelAnimationFrame)}function i(e,t,i){function n(n){i&&!i(e,t)||n.stopImmediatePropagation()}return e.addEventListener(t,n),n}function n(e,t,i,n){function r(){return i[t]}function o(e){i[t]=e}n&&o(e[t]),Object.defineProperty(e,t,{get:r,set:o})}function r(e,t,i){i.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function o(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}function s(e){var t=new Audio;return r(e,"play",t),r(e,"playing",t),r(e,"pause",t),t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}function a(e,t,i){(v||0)+200<Date.now()&&(e[_]=!0,v=Date.now()),i||(e.currentTime=t),k[++T%3]=100*t|0}function l(e){return e.driver.currentTime>=e.video.duration}function u(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&l(t)&&(t.driver.currentTime=0)),a(t.video,t.driver.currentTime)):t.video.networkState===t.video.NETWORK_IDLE&&0===t.video.buffered.length&&t.video.load(),t.video.ended&&(delete t.video[_],t.video.pause(!0))}function c(){var e=this,t=e[y];return e.webkitDisplayingFullscreen?void e[b]():("data:"!==t.driver.src&&t.driver.src!==e.src&&(a(e,0,!0),t.driver.src=e.src),void(e.paused&&(t.paused=!1,0===e.buffered.length&&e.load(),t.driver.play(),t.updater.start(),t.hasAudio||(o(e,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&o(e,"playing")))))}function d(e){var t=this,i=t[y];i.driver.pause(),i.updater.stop(),t.webkitDisplayingFullscreen&&t[w](),i.paused&&!e||(i.paused=!0,i.hasAudio||o(t,"pause"),t.ended&&!t.webkitDisplayingFullscreen&&(t[_]=!0,o(t,"ended")))}function h(e,i){var n={};e[y]=n,n.paused=!0,n.hasAudio=i,n.video=e,n.updater=t(u.bind(n)),i?n.driver=s(e):(e.addEventListener("canplay",function(){e.paused||o(e,"playing")}),n.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){n.driver.paused=!0},play:function(){n.driver.paused=!1,l(n)&&a(e,0)},get ended(){return l(n)}}),e.addEventListener("emptied",function(){var t=!n.driver.src||"data:"===n.driver.src;n.driver.src&&n.driver.src!==e.src&&(a(e,0,!0),n.driver.src=e.src,t||!i&&e.autoplay?n.driver.play():n.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?i&&0===n.driver.buffered.length&&n.driver.load():(e.pause(),e[b]())}),i&&(e.addEventListener("webkitendfullscreen",function(){n.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){k.indexOf(100*e.currentTime|0)<0&&(n.driver.currentTime=e.currentTime)}))}function p(e){var t=e[_];return delete e[_],!e.webkitDisplayingFullscreen&&!t}function f(e){var t=e[y];e[b]=e.play,e[w]=e.pause,e.play=c,e.pause=d,n(e,"paused",t.driver),n(e,"muted",t.driver,!0),n(e,"playbackRate",t.driver,!0),n(e,"ended",t.driver),n(e,"loop",t.driver,!0),i(e,"seeking",function(e){return!e.webkitDisplayingFullscreen}),i(e,"seeked",function(e){return!e.webkitDisplayingFullscreen}),i(e,"timeupdate",p),i(e,"ended",p)}function m(e,t){if(void 0===t&&(t={}),!e[y]){if(!t.everywhere){if(!g)return;if(!(t.iPad||t.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}e.pause();var i=e.autoplay;e.autoplay=!1,h(e,!e.muted),f(e),e.classList.add("IIV"),e.muted&&i&&(e.play(),e.addEventListener("playing",function n(){e.autoplay=!0,e.removeEventListener("playing",n)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}var v,g="object"==typeof document&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,y="bfred-it:iphone-inline-video",_="bfred-it:iphone-inline-video:event",b="bfred-it:iphone-inline-video:nativeplay",w="bfred-it:iphone-inline-video:nativepause",k=[],T=0;return m}(),window.Buzzoola.utils.makeVideoPlayableInline=function(){"use strict";function e(e,t,i,n){function r(i){o=t(r,n),e(i-(s||i)),s=i}var o,s;return{start:function(){o||r(0)},stop:function(){i(o),o=null,s=0}}}function t(t){return e(t,requestAnimationFrame,cancelAnimationFrame)}function i(e,t,i,n){function r(t){Boolean(e[i])===Boolean(n)&&t.stopImmediatePropagation(),delete e[i]}return e.addEventListener(t,r,!1),r}function n(e,t,i,n){function r(){return i[t]}function o(e){i[t]=e}n&&o(e[t]),Object.defineProperty(e,t,{get:r,set:o})}function r(e,t,i){i.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function o(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}function s(e){var t=new Audio;return r(e,"play",t),r(e,"playing",t),r(e,"pause",t),t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}function a(e,t,i){(m||0)+200<Date.now()&&(e[_]=!0,m=Date.now()),i||(e.currentTime=t),k[++T%3]=100*t|0}function l(e){return e.driver.currentTime>=e.video.duration}function u(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&l(t)&&(t.driver.currentTime=0)),a(t.video,t.driver.currentTime)):t.video.networkState!==t.video.NETWORK_IDLE||t.video.buffered.length||t.video.load(),t.video.ended&&(delete t.video[_],t.video.pause(!0))}function c(){var e=this,t=e[y];return e.webkitDisplayingFullscreen?void e[b]():("data:"!==t.driver.src&&t.driver.src!==e.src&&(a(e,0,!0),t.driver.src=e.src),void(e.paused&&(t.paused=!1,e.buffered.length||e.load(),t.driver.play(),t.updater.start(),t.hasAudio||(o(e,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&o(e,"playing")))))}function d(e){var t=this,i=t[y];i.driver.pause(),i.updater.stop(),t.webkitDisplayingFullscreen&&t[w](),i.paused&&!e||(i.paused=!0,i.hasAudio||o(t,"pause"),t.ended&&(t[_]=!0,o(t,"ended")))}function h(e,i){var n=e[y]={};n.paused=!0,n.hasAudio=i,n.video=e,n.updater=t(u.bind(n)),i?n.driver=s(e):(e.addEventListener("canplay",function(){e.paused||o(e,"playing")}),n.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){n.driver.paused=!0},play:function(){n.driver.paused=!1,l(n)&&a(e,0)},get ended(){return l(n)}}),e.addEventListener("emptied",function(){var t=!n.driver.src||"data:"===n.driver.src;n.driver.src&&n.driver.src!==e.src&&(a(e,0,!0),n.driver.src=e.src,t?n.driver.play():n.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?i&&!n.driver.buffered.length&&n.driver.load():(e.pause(),e[b]())}),e.addEventListener("webkitendfullscreen",function(){e.play(),i&&(n.driver.currentTime=e.currentTime)}),i&&e.addEventListener("seeking",function(){k.indexOf(100*e.currentTime|0)<0&&(n.driver.currentTime=e.currentTime)})}function p(e){var t=e[y];e[b]=e.play,e[w]=e.pause,e.play=c,e.pause=d,n(e,"paused",t.driver),n(e,"muted",t.driver,!0),n(e,"playbackRate",t.driver,!0),n(e,"ended",t.driver),n(e,"loop",t.driver,!0),i(e,"seeking"),i(e,"seeked"),i(e,"timeupdate",_,!1),i(e,"ended",_,!1)}function f(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!0),i&&!g||e[y]||(h(e,t),p(e),e.classList.add("IIV"),!t&&e.autoplay&&e.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))}var m,v="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol,g=/iPhone|iPod/i.test(navigator.userAgent)&&!matchMedia("(-webkit-video-playable-inline)").matches,y=v(),_=v(),b=v("nativeplay"),w=v("nativepause"),k=[],T=0;return f.isWhitelisted=g,f}(),function(e,t){e.Mustache={},t(e.Mustache)}(window.Buzzoola.utils,function(e){function t(e){return"function"==typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e,t){return null!=e&&"object"==typeof e&&t in e}function r(e,t){return m.call(e,t)}function o(e){return!r(v,e)}function s(e){return String(e).replace(/[&<>"'\/]/g,function(e){return g[e]})}function a(t,n){function r(){if(g&&!T)for(;v.length;)delete m[v.pop()];else v=[];g=!1,T=!1}function s(e){if("string"==typeof e&&(e=e.split(_,2)),!f(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(i(e[0])+"\\s*"),d=new RegExp("\\s*"+i(e[1])),h=new RegExp("\\s*"+i("}"+e[1]))}if(!t)return[];var a,d,h,p=[],m=[],v=[],g=!1,T=!1;s(n||e.tags);for(var x,A,E,S,z,L,C=new c(t);!C.eos();){if(x=C.pos,E=C.scanUntil(a))for(var R=0,D=E.length;R<D;++R)S=E.charAt(R),o(S)?v.push(m.length):T=!0,m.push(["text",S,x,x+1]),x+=1,"\n"===S&&r();if(!C.scan(a))break;if(g=!0,A=C.scan(k)||"name",C.scan(y),"="===A?(E=C.scanUntil(b),C.scan(b),C.scanUntil(d)):"{"===A?(E=C.scanUntil(h),C.scan(w),C.scanUntil(d),A="&"):E=C.scanUntil(d),!C.scan(d))throw new Error("Unclosed tag at "+C.pos);if(z=[A,E,x,C.pos],m.push(z),"#"===A||"^"===A)p.push(z);else if("/"===A){if(L=p.pop(),!L)throw new Error('Unopened section "'+E+'" at '+x);if(L[1]!==E)throw new Error('Unclosed section "'+L[1]+'" at '+x)}else"name"===A||"{"===A||"&"===A?T=!0:"="===A&&s(E)}if(L=p.pop())throw new Error('Unclosed section "'+L[1]+'" at '+C.pos);return u(l(m))}function l(e){for(var t,i,n=[],r=0,o=e.length;r<o;++r)t=e[r],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}function u(e){for(var t,i,n=[],r=n,o=[],s=0,a=e.length;s<a;++s)switch(t=e[s],t[0]){case"#":case"^":r.push(t),o.push(t),r=t[4]=[];break;case"/":i=o.pop(),i[5]=t[2],r=o.length>0?o[o.length-1][4]:n;break;default:r.push(t)}return n}function c(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function h(){this.cache={}}var p=Object.prototype.toString,f=Array.isArray||function(e){return"[object Array]"===p.call(e)},m=RegExp.prototype.test,v=/\S/,g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},y=/\s*/,_=/\s+/,b=/\s*=/,w=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},c.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var i,r=this.cache;if(r.hasOwnProperty(e))i=r[e];else{for(var o,s,a=this,l=!1;a;){if(e.indexOf(".")>0)for(i=a.view,o=e.split("."),s=0;null!=i&&s<o.length;)s===o.length-1&&(l=n(i,o[s])),i=i[o[s++]];else i=a.view[e],l=n(a.view,e);if(l)break;a=a.parent}r[e]=i}return t(i)&&(i=i.call(this.view)),i},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(e,t){var i=this.cache,n=i[e];return null==n&&(n=i[e]=a(e,t)),n},h.prototype.render=function(e,t,i){var n=this.parse(e),r=t instanceof d?t:new d(t);return this.renderTokens(n,r,i,e)},h.prototype.renderTokens=function(e,t,i,n){for(var r,o,s,a="",l=0,u=e.length;l<u;++l)s=void 0,r=e[l],o=r[0],"#"===o?s=this.renderSection(r,t,i,n):"^"===o?s=this.renderInverted(r,t,i,n):">"===o?s=this.renderPartial(r,t,i,n):"&"===o?s=this.unescapedValue(r,t):"name"===o?s=this.escapedValue(r,t):"text"===o&&(s=this.rawValue(r)),void 0!==s&&(a+=s);return a},h.prototype.renderSection=function(e,i,n,r){function o(e){return s.render(e,i,n)}var s=this,a="",l=i.lookup(e[1]);if(l){if(f(l))for(var u=0,c=l.length;u<c;++u)a+=this.renderTokens(e[4],i.push(l[u]),n,r);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)a+=this.renderTokens(e[4],i.push(l),n,r);else if(t(l)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");l=l.call(i.view,r.slice(e[3],e[5]),o),null!=l&&(a+=l)}else a+=this.renderTokens(e[4],i,n,r);return a}},h.prototype.renderInverted=function(e,t,i,n){var r=t.lookup(e[1]);if(!r||f(r)&&0===r.length)return this.renderTokens(e[4],t,i,n)},h.prototype.renderPartial=function(e,i,n){if(n){var r=t(n)?n(e[1]):n[e[1]];return null!=r?this.renderTokens(this.parse(r),i,n,r):void 0}},h.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},h.prototype.escapedValue=function(t,i){var n=i.lookup(t[1]);if(null!=n)return e.escape(n)},h.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.1.2",e.tags=["{{","}}"];var T=new h;e.clearCache=function(){return T.clearCache()},e.parse=function(e,t){return T.parse(e,t)},e.render=function(e,t,i){return T.render(e,t,i)},e.to_html=function(i,n,r,o){var s=e.render(i,n,r);return t(o)?void o(s):s},e.escape=s,e.Scanner=c,e.Context=d,e.Writer=h}),!function(e){Buzzoola.utils.DMVAST=e()}(function(){return function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){var i=t[s][1][e];return r(i?i:e)},u,u.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,i,n,o,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[e],a(i))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),l=1;l<n;l++)o[l-1]=arguments[l];i.apply(this,o)}else if(s(i)){for(n=arguments.length,o=new Array(n-1),l=1;l<n;l++)o[l-1]=arguments[l];for(u=i.slice(),n=u.length,l=0;l<n;l++)u[l].apply(this,o)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var i;i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var n=!1;return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var i,n,o,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],o=i.length,n=-1,i===t||r(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(i)){for(a=o;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){n=a;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],r(i))this.removeListener(e,i);else for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var i;return i=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t,i){var n;n=function(){function e(){this.id=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[],this.extensions=[]}return e}(),t.exports=n},{}],3:[function(e,t,i){var n,r,o;r=e("./parser"),o=e("./util"),n=function(){function e(){}return e.cappingFreeLunch=0,e.cappingMinimumTimeInterval=0,e.options={withCredentials:!1,timeout:0},e.get=function(e,t,n){var o,s,a;return s=+new Date,o=i.extend=function(e,t){var i,n;for(i in t)n=t[i],e[i]=n;return e},n||("function"==typeof t&&(n=t),a={}),a=o(this.options,t),this.totalCallsTimeout<s?(this.totalCalls=1,this.totalCallsTimeout=s+36e5):this.totalCalls++,this.cappingFreeLunch>=this.totalCalls?void n(null):s-this.lastSuccessfullAd<this.cappingMinimumTimeInterval?void n(null):r.parse(e,a,function(e){return function(e,t,i){return n(e,t,i)}}(this))},function(){var t,i;i=o.storage,t=Object.defineProperty,["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach(function(n){t(e,n,{get:function(){return i.getItem(n)},set:function(e){return i.setItem(n,e)},configurable:!1,enumerable:!0})}),null==e.totalCalls&&(e.totalCalls=0),null==e.totalCallsTimeout&&(e.totalCallsTimeout=0)}(),e}(),t.exports=n},{"./parser":9,"./util":15}],4:[function(e,t,i){var n;n=function(){function e(){this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.companionClickThroughURLTemplate=null,this.trackingEvents={}}return e}(),t.exports=n},{}],5:[function(e,t,i){var n,r,o,s,a={}.hasOwnProperty,l=function(e,t){function i(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};n=function(){function e(){this.trackingEvents={}}return e}(),o=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="linear",this.duration=0,this.skipDelay=null,this.mediaFiles=[],this.icons=[],this.videoClickThroughURLTemplate=null,this.videoClickTrackingURLTemplates=[],this.videoCustomClickURLTemplates=[],this.adParameters=null}return l(t,e),t}(n),s=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.type="nonlinear",this.variations=[],this.videoClickTrackingURLTemplates=[]}return l(t,e),t}(n),r=function(e){function t(){this.type="companion",this.variations=[],this.videoClickTrackingURLTemplates=[]}return l(t,e),t}(n),t.exports={VASTCreativeLinear:o,VASTCreativeNonLinear:s,VASTCreativeCompanion:r}},{}],6:[function(e,t,i){t.exports={client:e("./client"),tracker:e("./tracker"),parser:e("./parser"),util:e("./util")}},{"./client":3,"./parser":9,"./tracker":11,"./util":15}],7:[function(e,t,i){var n;n=function(){function e(){this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null}return e}(),t.exports=n},{}],8:[function(e,t,i){var n;n=function(){function e(){this.id=null,this.width=0,this.height=0,
this.minSuggestedDuration="00:00:00",this.apiFramework="static",this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.nonlinearClickThroughURLTemplate=null}return e}(),t.exports=n},{}],9:[function(e,t,i){var n,r,o,s,a,l,u,c,d,h,p,f,m=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1};r=e("./urlhandler"),p=e("./response"),o=e("./ad"),f=e("./util"),l=e("./creative").VASTCreativeLinear,a=e("./creative").VASTCreativeCompanion,u=e("./creative").VASTCreativeNonLinear,c=e("./mediafile"),s=e("./companionad"),d=e("./nonlinear"),n=e("events").EventEmitter,h=function(){function e(){}var t;return t=[],e.addURLTemplateFilter=function(e){"function"==typeof e&&t.push(e)},e.removeURLTemplateFilter=function(){return t.pop()},e.countURLTemplateFilters=function(){return t.length},e.clearUrlTemplateFilters=function(){return t=[]},e.parse=function(e,t,i){return i||("function"==typeof t&&(i=t),t={}),this._parse(e,null,t,function(e,t,n){return i(e,t,n)})},e.vent=new n,e.track=function(e,t){return this.vent.emit("VAST-error",t),f.track(e,t)},e.on=function(e,t){return this.vent.on(e,t)},e.once=function(e,t){return this.vent.once(e,t)},e._parse=function(e,i,n,o){var s,a,l;for(o||("function"==typeof n&&(o=n),n={}),a=0,l=t.length;a<l;a++)s=t[a],e=s(e);return null==i&&(i=[]),i.push(e),r.get(e,n,function(t){return function(r,s){var a,l,u,c,d,h,f,v,g,y,_;if(null!=r)return o(r);if(d=new p,null==(null!=s?s.documentElement:void 0)||"VAST"!==s.documentElement.nodeName)return o("nobanner");for(y=s.documentElement.childNodes,h=0,v=y.length;h<v;h++)c=y[h],"Error"===c.nodeName&&d.errorURLTemplates.push(t.parseNodeText(c));for(_=s.documentElement.childNodes,f=0,g=_.length;f<g;f++)c=_[f],"Ad"===c.nodeName&&(a=t.parseAdElement(c),null!=a?d.ads.push(a):t.track(d.errorURLTemplates,{ERRORCODE:101}));for(l=function(e){var i,n,r;if(null==e&&(e=!1),d){for(r=d.ads,i=0,n=r.length;i<n;i++)if(a=r[i],null!=a.nextWrapperURL)return;return 0===d.ads.length&&(e||t.track(d.errorURLTemplates,{ERRORCODE:303}),d=null),o(null,d,s)}},u=d.ads.length;u--;)a=d.ads[u],null!=a.nextWrapperURL&&!function(r){var o,s,a;return i.length>=10||(a=r.nextWrapperURL,m.call(i,a)>=0)?(t.track(r.errorURLTemplates,{ERRORCODE:302}),d.ads.splice(d.ads.indexOf(r),1),void l()):(0===r.nextWrapperURL.indexOf("//")?(s=location.protocol,r.nextWrapperURL=""+s+r.nextWrapperURL):r.nextWrapperURL.indexOf("://")===-1&&(o=e.slice(0,e.lastIndexOf("/")),r.nextWrapperURL=""+o+"/"+r.nextWrapperURL),t._parse(r.nextWrapperURL,i,n,function(e,i){var n,o,s,a,u,c,h,p,f,m,v,g,y,_,b,w,k,T;if(o=!1,null!=e)t.track(r.errorURLTemplates,{ERRORCODE:301}),d.ads.splice(d.ads.indexOf(r),1),o=!0;else if(null==i)t.track(r.errorURLTemplates,{ERRORCODE:303}),d.ads.splice(d.ads.indexOf(r),1),o=!0;else for(d.errorURLTemplates=d.errorURLTemplates.concat(i.errorURLTemplates),a=d.ads.indexOf(r),d.ads.splice(a,1),b=i.ads,h=0,p=b.length;h<p;h++){if(u=b[h],u.errorURLTemplates=r.errorURLTemplates.concat(u.errorURLTemplates),u.impressionURLTemplates=r.impressionURLTemplates.concat(u.impressionURLTemplates),null!=r.trackingEvents)for(w=u.creatives,g=0,f=w.length;g<f;g++)if(n=w[g],"linear"===n.type||"nonlinear"===n.type)for(k=Object.keys(r.trackingEvents),y=0,m=k.length;y<m;y++)s=k[y],(c=n.trackingEvents)[s]||(c[s]=[]),n.trackingEvents[s]=n.trackingEvents[s].concat(r.trackingEvents[s]);if(null!=r.videoClickTrackingURLTemplates)for(T=u.creatives,_=0,v=T.length;_<v;_++)n=T[_],"linear"!==n.type&&"nonlinear"!==n.type||(n.videoClickTrackingURLTemplates=n.videoClickTrackingURLTemplates.concat(r.videoClickTrackingURLTemplates));d.ads.splice(a,0,u)}return delete r.nextWrapperURL,l(o)}))}(a);return l()}}(this))},e.childByName=function(e,t){var i,n,r,o;for(o=e.childNodes,n=0,r=o.length;n<r;n++)if(i=o[n],i.nodeName===t)return i},e.childsByName=function(e,t){var i,n,r,o,s;for(n=[],s=e.childNodes,r=0,o=s.length;r<o;r++)i=s[r],i.nodeName===t&&n.push(i);return n},e.parseAdElement=function(e){var t,i,n,r;for(r=e.childNodes,i=0,n=r.length;i<n;i++){t=r[i];try{t.id=e.getAttribute("id")}catch(o){t.setAttribute("id",e.getAttribute("id"))}if("Wrapper"===t.nodeName)return this.parseWrapperElement(t);if("InLine"===t.nodeName)return this.parseInLineElement(t)}},e.parseWrapperElement=function(e){var t,i,n,r,o,s,a;for(t=this.parseInLineElement(e),r=this.childByName(e,"VASTAdTagURI"),null!=r?t.nextWrapperURL=this.parseNodeText(r):(r=this.childByName(e,"VASTAdTagURL"),null!=r&&(t.nextWrapperURL=this.parseNodeText(this.childByName(r,"URL")))),a=t.creatives,o=0,s=a.length;o<s;o++)i=a[o],n=null,"linear"!==i.type&&"nonlinear"!==i.type||(n=i,null!=n&&(null!=n.trackingEvents&&(t.trackingEvents=n.trackingEvents),null!=n.videoClickTrackingURLTemplates&&(t.videoClickTrackingURLTemplates=n.videoClickTrackingURLTemplates)));if(null!=t.nextWrapperURL)return t},e.parseInLineElement=function(e){var t,i,n,r,s,a,l,u,c,d,h,p,f,m,v,g;for(t=new o,t.id=e.id,m=e.childNodes,u=0,h=m.length;u<h;u++)switch(l=m[u],l.nodeName){case"Error":t.errorURLTemplates.push(this.parseNodeText(l));break;case"Impression":t.impressionURLTemplates.push(this.parseNodeText(l));break;case"Extensions":for(v=this.childsByName(l,"Extension"),c=0,p=v.length;c<p;c++)a=v[c],s=this.parseExtensionElement(a),s&&t.extensions.push(s);break;case"Creatives":for(v=this.childsByName(l,"Creative"),c=0,p=v.length;c<p;c++)for(n=v[c],g=n.childNodes,d=0,f=g.length;d<f;d++)switch(r=g[d],r.nodeName){case"Linear":i=this.parseCreativeLinearElement(r),i&&t.creatives.push(i);break;case"NonLinearAds":i=this.parseNonLinear(r),i&&t.creatives.push(i);break;case"CompanionAds":i=this.parseCompanionAd(r),i&&t.creatives.push(i)}}return t},e.parseExtensionElement=function(e){var t=this,i={},n=!1;if(i.type=e.getAttribute("type"),e.hasChildNodes())return e.childNodes.forEach(function(e){3!==e.nodeType&&(i[e.nodeName.toLowerCase()]=t.parseNodeText(e),n=!0)}),n?i:void 0},e.parseCreativeLinearElement=function(e){var t,i,n,r,o,s,a,u,d,h,p,f,m,v,g,y,_,b,w,k,T,x,A,E,S,z,L,C,R,D,M,B,N,P,U,O;if(n=new l,n.duration=this.parseDuration(this.parseNodeText(this.childByName(e,"Duration"))),n.duration===-1&&"Wrapper"!==e.parentNode.parentNode.parentNode.nodeName)return null;if(m=e.getAttribute("skipoffset"),null==m?n.skipDelay=null:"%"===m.charAt(m.length-1)?(p=parseInt(m,10),n.skipDelay=n.duration*(p/100)):n.skipDelay=this.parseDuration(m),_=this.childByName(e,"VideoClicks"),null!=_){for(n.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(_,"ClickThrough")),M=this.childsByName(_,"ClickTracking"),w=0,A=M.length;w<A;w++)i=M[w],n.videoClickTrackingURLTemplates.push(this.parseNodeText(i));for(B=this.childsByName(_,"CustomClick"),k=0,E=B.length;k<E;k++)r=B[k],n.videoCustomClickURLTemplates.push(this.parseNodeText(r))}for(t=this.childByName(e,"AdParameters"),null!=t&&(n.adParameters=this.parseNodeText(t)),N=this.childsByName(e,"TrackingEvents"),T=0,S=N.length;T<S;T++)for(g=N[T],P=this.childsByName(g,"Tracking"),x=0,z=P.length;x<z;x++)if(v=P[x],o=v.getAttribute("event"),y=this.parseNodeText(v),null!=o&&null!=y){if("progress"===o){if(h=v.getAttribute("offset"),!h)continue;o="%"===h.charAt(h.length-1)?"progress-"+h:"progress-"+Math.round(this.parseDuration(h))}null==(b=n.trackingEvents)[o]&&(b[o]=[]),n.trackingEvents[o].push(y)}for(U=this.childsByName(e,"MediaFiles"),R=0,L=U.length;R<L;R++)for(d=U[R],O=this.childsByName(d,"MediaFile"),D=0,C=O.length;D<C;D++)u=O[D],a=new c,a.id=u.getAttribute("id"),a.fileURL=this.parseNodeText(u),a.deliveryType=u.getAttribute("delivery"),a.codec=u.getAttribute("codec"),a.mimeType=u.getAttribute("type"),a.apiFramework=u.getAttribute("apiFramework"),a.bitrate=parseInt(u.getAttribute("bitrate")||0),a.minBitrate=parseInt(u.getAttribute("minBitrate")||0),a.maxBitrate=parseInt(u.getAttribute("maxBitrate")||0),a.width=parseInt(u.getAttribute("width")||0),a.height=parseInt(u.getAttribute("height")||0),f=u.getAttribute("scalable"),f&&"string"==typeof f&&(f=f.toLowerCase(),"true"===f?a.scalable=!0:"false"===f&&(a.scalable=!1)),s=u.getAttribute("maintainAspectRatio"),s&&"string"==typeof s&&(s=s.toLowerCase(),"true"===s?a.maintainAspectRatio=!0:"false"===s&&(a.maintainAspectRatio=!1)),n.mediaFiles.push(a);for(U=this.childsByName(e,"Icons"),R=0,L=U.length;R<L;R++)for(d=U[R],O=this.childsByName(d,"Icon"),D=0,C=O.length;D<C;D++)u=O[D],a={},a.id=u.getAttribute("id"),a.fileURL=this.parseNodeText(u),a.width=parseInt(u.getAttribute("width")||0),a.height=parseInt(u.getAttribute("height")||0),n.icons.push(a);return n},e.parseNonLinear=function(e){var t,i,n,r,o,s,a,l,c,h,p,f,m,v,g,y,_,b,w,k,T,x,A,E,S,z,L,C,R;for(t=new u,E=this.childsByName(e,"TrackingEvents"),f=0,y=E.length;f<y;f++)for(c=E[f],S=this.childsByName(c,"Tracking"),m=0,_=S.length;m<_;m++)l=S[m],i=l.getAttribute("event"),h=this.parseNodeText(l),null!=i&&null!=h&&(null==(p=t.trackingEvents)[i]&&(p[i]=[]),t.trackingEvents[i].push(h));for(z=this.childsByName(e,"NonLinear"),v=0,b=z.length;v<b;v++){for(s=z[v],o=new d,o.id=s.getAttribute("id")||null,o.width=s.getAttribute("width"),o.height=s.getAttribute("height"),o.minSuggestedDuration=s.getAttribute("minSuggestedDuration"),o.apiFramework=s.getAttribute("apiFramework"),L=this.childsByName(s,"HTMLResource"),g=0,w=L.length;g<w;g++)n=L[g],o.type=n.getAttribute("creativeType")||"text/html",o.htmlResource=this.parseNodeText(n);for(C=this.childsByName(s,"IFrameResource"),x=0,k=C.length;x<k;x++)r=C[x],o.type=r.getAttribute("creativeType")||0,o.iframeResource=this.parseNodeText(r);for(R=this.childsByName(s,"StaticResource"),A=0,T=R.length;A<T;A++)a=R[A],o.type=a.getAttribute("creativeType")||0,o.staticResource=this.parseNodeText(a);o.nonlinearClickThroughURLTemplate=this.parseNodeText(this.childByName(s,"NonLinearClickThrough")),t.variations.push(o)}return t},e.parseCompanionAd=function(e){var t,i,n,r,o,l,u,c,d,h,p,f,m,v,g,y,_,b,w,k,T,x,A,E,S,z,L,C,R;for(n=new a,E=this.childsByName(e,"Companion"),f=0,y=E.length;f<y;f++){for(i=E[f],t=new s,t.id=i.getAttribute("id")||null,t.width=i.getAttribute("width"),t.height=i.getAttribute("height"),S=this.childsByName(i,"HTMLResource"),m=0,_=S.length;m<_;m++)o=S[m],t.type=o.getAttribute("creativeType")||"text/html",t.htmlResource=this.parseNodeText(o);for(z=this.childsByName(i,"IFrameResource"),v=0,b=z.length;v<b;v++)l=z[v],t.type=l.getAttribute("creativeType")||0,t.iframeResource=this.parseNodeText(l);for(L=this.childsByName(i,"StaticResource"),g=0,w=L.length;g<w;g++)u=L[g],t.type=u.getAttribute("creativeType")||0,t.staticResource=this.parseNodeText(u);for(C=this.childsByName(i,"TrackingEvents"),x=0,k=C.length;x<k;x++)for(d=C[x],R=this.childsByName(d,"Tracking"),A=0,T=R.length;A<T;A++)c=R[A],r=c.getAttribute("event"),h=this.parseNodeText(c),null!=r&&null!=h&&(null==(p=t.trackingEvents)[r]&&(p[r]=[]),t.trackingEvents[r].push(h));t.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(i,"CompanionClickThrough")),n.variations.push(t)}return n},e.parseDuration=function(e){var t,i,n,r,o,s;return null==e?-1:(t=e.split(":"),s=t.length,!s||s>3?-1:(o=t[s-1].split("."),r=parseInt(o[0]),2===o.length&&(r+=parseFloat("0."+o[1])),i=n=0,2==s?n=parseInt(60*t[0]):3==s&&(n=parseInt(60*t[1]),i=parseInt(60*t[0]*60)),isNaN(i)||isNaN(n)||isNaN(r)||n>3600||r>60?-1:i+n+r))},e.parseNodeText=function(e){return e&&(e.textContent||e.text||"").trim()},e}(),t.exports=h},{"./ad":2,"./companionad":4,"./creative":5,"./mediafile":7,"./nonlinear":8,"./response":10,"./urlhandler":12,"./util":15,events:1}],10:[function(e,t,i){var n;n=function(){function e(){this.ads=[],this.errorURLTemplates=[]}return e}(),t.exports=n},{}],11:[function(e,t,i){var n,r,o,s,a,l={}.hasOwnProperty,u=function(e,t){function i(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};r=e("./client"),a=e("./util"),o=e("./creative").VASTCreativeLinear,n=e("events").EventEmitter,s=function(e){function t(e,t){var i,n,s;this.ad=e,this.creative=t,this.muted=!1,this.impressed=!1,this.skipable=!1,this.skipDelayDefault=-1,this.trackingEvents={},this.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],s=this.creative.trackingEvents;for(i in s)n=s[i],this.trackingEvents[i]=n.slice(0);this.creative instanceof o?(this.setDuration(this.creative.duration),this.skipDelay=this.creative.skipDelay,this.linear=!0,this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates):(this.skipDelay=-1,this.linear=!1),this.on("start",function(){r.lastSuccessfullAd=+new Date})}return u(t,e),t.prototype.setDuration=function(e){return this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}},t.prototype.setProgress=function(e){var t,i,n,r,o,s,a,l,u;if(o=null===this.skipDelay?this.skipDelayDefault:this.skipDelay,o===-1||this.skipable||(o>e?this.emit("skip-countdown",o-e):(this.skipable=!0,this.emit("skip-countdown",0))),this.linear&&this.assetDuration>0){if(i=[],e>0){i.push("start"),n=Math.round(e/this.assetDuration*100),i.push("progress-"+n+"%"),i.push("progress-"+Math.round(e)),u=this.quartiles;for(r in u)s=u[r],s<=e&&e<=s+1&&i.push(r)}for(a=0,l=i.length;a<l;a++)t=i[a],this.track(t,!0);e<this.progress&&this.track("rewind")}return this.progress=e},t.prototype.setMuted=function(e){return this.muted!==e&&this.track(e?"mute":"unmute"),this.muted=e},t.prototype.setPaused=function(e){return this.paused!==e&&this.track(e?"pause":"resume"),this.paused=e},t.prototype.setFullscreen=function(e){return this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen"),this.fullscreen=e},t.prototype.setSkipDelay=function(e){if("number"==typeof e)return this.skipDelay=e},t.prototype.load=function(){if(!this.impressed)return this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView")},t.prototype.errorWithCode=function(e){return this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:e})},t.prototype.complete=function(){return this.track("complete")},t.prototype.close=function(){return this.track(this.linear?"closeLinear":"close")},t.prototype.stop=function(){},t.prototype.skip=function(){return this.track("skip"),this.trackingEvents=[]},t.prototype.click=function(){var e,t,i;if((null!=(i=this.clickTrackingURLTemplates)?i.length:void 0)&&this.trackURLs(this.clickTrackingURLTemplates),null!=this.clickThroughURLTemplate)return this.linear&&(t={CONTENTPLAYHEAD:this.progressFormated()}),e=a.resolveURLTemplates([this.clickThroughURLTemplate],t)[0],this.emit("clickthrough",e)},t.prototype.track=function(e,t){var i,n;null==t&&(t=!1),"closeLinear"===e&&null==this.trackingEvents[e]&&null!=this.trackingEvents.close&&(e="close"),n=this.trackingEvents[e],i=this.emitAlwaysEvents.indexOf(e),null!=n?(this.emit(e,""),this.trackURLs(n)):i!==-1&&this.emit(e,""),t===!0&&(delete this.trackingEvents[e],i>-1&&this.emitAlwaysEvents.splice(i,1))},t.prototype.trackURLs=function(e,t){return null==t&&(t={}),this.linear&&(t.CONTENTPLAYHEAD=this.progressFormated()),a.track(e,t)},t.prototype.progressFormated=function(){var e,t,i,n,r;return r=parseInt(this.progress),e=r/3600,e.length<2&&(e="0"+e),t=r/60%60,t.length<2&&(t="0"+t),n=r%60,n.length<2&&(n="0"+t),i=parseInt(100*(this.progress-r)),""+e+":"+t+":"+n+"."+i},t}(n),t.exports=s},{"./client":3,"./creative":5,"./util":15,events:1}],12:[function(e,t,i){var n,r,o;o=e("./urlhandlers/xmlhttprequest"),r=e("./urlhandlers/flash"),n=function(){function t(){}return t.get=function(t,i,n){return n||("function"==typeof i&&(n=i),i={}),/^https?:\/\//i.test(t)?i.urlhandler&&i.urlhandler.supported()?i.urlhandler.get(t,i,n):"undefined"==typeof window||null===window?e("./urlhandlers/node").get(t,i,n):o.supported()?o.get(t,i,n):r.supported()?r.get(t,i,n):n():n(null,Buzzoola.utils.parseXML(t))},t}(),t.exports=n},{"./urlhandlers/flash":13,"./urlhandlers/xmlhttprequest":14}],13:[function(e,t,i){var n;n=function(){function e(){}return e.xdr=function(){var e;return window.XDomainRequest&&(e=new XDomainRequest),e},e.supported=function(){return!!this.xdr()},e.get=function(e,t,i){var n,r;return(r="function"==typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)?(r.async=!1,n=this.xdr(),n.open("GET",e),n.timeout=t.timeout||0,n.withCredentials=t.withCredentials||!1,n.send(),n.onprogress=function(){},n.onload=function(){return r.loadXML(n.responseText),i(null,r)}):i()},e}(),t.exports=n},{}],14:[function(e,t,i){var n;n=function(){function e(){}return e.xhr=function(){var e;if(e=new window.XMLHttpRequest,"withCredentials"in e)return e},e.supported=function(){return!!this.xhr()},e.get=function(e,t,i){var n;try{n=this.xhr(),n.open("GET",e),n.timeout=t.timeout||0,n.withCredentials=t.withCredentials||!1,n.send(),n.onload=function(){i&&i(n.status>=400?n.status:null,n.responseXML||n.response||n.responseText)},n.onerror=function(){i&&i(!0,n.responseXML||n.response||n.responseText)},n.onprogress=function(){},n.ontimeout=function(){i&&i(!0,n.responseXML||n.response||n.responseText)}}catch(r){return i(r)}},e}(),t.exports=n},{}],15:[function(e,t,i){var n;n=function(){function e(){}return e.track=function(e,t){var i,n,r,o,s,a;for(n=this.resolveURLTemplates(e,t),a=[],o=0,s=n.length;o<s;o++)i=n[o],"undefined"!=typeof window&&null!==window&&(r=new Image,a.push(r.src=i));return a},e.resolveURLTemplates=function(e,t){var i,n,r,o,s,a,l,u,c;n=[],null==t&&(t={}),"CACHEBUSTING"in t||(t.CACHEBUSTING=Math.round(1e10*Math.random())),t.random=t.CACHEBUSTING;for(u=0,c=e.length;u<c;u++)if(i=e[u],a=i){for(r in t)l=t[r],o="["+r+"]",s="%%"+r+"%%",a=a.replace(o,l),a=a.replace(s,l);n.push(a)}return n},e.storage=function(){var e,t,i,n;try{i="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(r){n=r,i=null}return t=function(e){var t,i;try{if(i="__VASTUtil__",e.setItem(i,i),e.getItem(i)!==i)return!0}catch(n){return t=n,!0}return!1},(null==i||t(i))&&(e={},i={length:0,getItem:function(t){return e[t]},setItem:function(t,i){e[t]=i,this.length=Object.keys(e).length},removeItem:function(t){delete e[t],this.length=Object.keys(e).length},clear:function(){e={},this.length=0}}),i}(),e}(),t.exports=n},{}]},{},[6])(6)}),function(){var e=[].slice,t=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},i=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;!function(t,i,n){var r,o,s,a,l,u;return u={callsStrategies:["resize:calcWidth","resize:calcHeight"],triggersEvents:["event:state","error"]},s={drawn:function(){return this.draw()}},a=function(){if(this.carouselItems=[],this.initModules)return this.initModules()},r=function(){var e,t,i,n,r,o;for(this.core.widget_div.className+=" buzz-carousel",t="",o=this.core.loaded_data.content.main_content,e=i=0,n=o.length;i<n;e=++i)r=o[e],t+="<div class='buzz-carousel-item' "+("carousel"!==this.core.loaded_data.content_type?"style='margin: 0;'":"")+"> <div class='buzz-invisible' data-slugname='"+e+"' data-width='100%' "+(this.core.params.height||this.core.params.container_height?"data-container-height='100%'":"")+" "+(this.core.params.debug_mode&&"data-debug"||"")+" data-debug_env='"+this.core.environment+"' data-debug_api='"+this.core.apiEnv+"' ></div> </div>";return this.core.widget_div.innerHTML=t,this.carouselItems=this.core.widget_div.querySelectorAll("div.buzz-carousel-item"),this.initWidgets()},l=function(){var t,i,r,o,s,a,l,u,c;for(u={player_data_attributes:null,unit_settings:null,unit_settings_list:["width","container_height","debug_mode"]},s=this.carouselItems.length,a=this.carouselItems,l=[],i=0,r=a.length;i<r;i++)t=a[i],t=t.children[0],c=+t.getAttribute("data-slugname"),o={parent_core:this.core,data:n.utils.extend({},this.core.loaded_data.content.carousel_default,this.core.loaded_data.content.main_content[c],{slugname:c},u)},l.push(new n.Core(t,o).on("error",function(t){return function(){var i;return i=1<=arguments.length?e.call(arguments,0):[],t.trigger.apply(t,["error"].concat(i))}}(this),!0).on("event:state",function(e){return function(t){if("ready"===t&&0===--s&&(e.trigger("event:state",e.core.state.state="ready"),e.resize))return e.resize(e.callStrategy("resize:calcWidth"),e.callStrategy("resize:calcHeight"))}}(this)));return l},o=function(){var e;return e=i.createElement("div"),e.style.position="relative",e.className="buzz_code",e},n.Modules.Mixins.CarouselInit=function(e){var t,i,n,c;e.init=a,e.handlesEvents=s,e.initWidgets=l,e.draw=r,e.getWrap=o,e.addsStrategies||(e.addsStrategies=[]),e.addsStrategies.push(["get_wrap",20,"getWrap"]),c=[];for(i in u)t=u[i],e[i]||(e[i]=[]),c.push((n=e[i]).push.apply(n,t));return c}}(window,document,Buzzoola),function(e,t,i){var n,r,o;return r={"animation:hover":function(e){if(this.animationSupported)return this.animate(e)}},o={triggersEvents:["close_button:drawn","close_button:click"],addsStrategies:[["close_button:get_button",0,"getButton"],["close_button:get_target",0,"getTarget"],["close_button:is_shown",0,"isShown"],["close_button:render",0,"render"],["close_button:show",0,"showDefaultStrategy"],["close_button:show_timer_tick",0,"showTimerTick"]],callsStrategies:["animation:supported","animation:status","widget:getCurrentTime","widget:getTotalTime","close_button:get_target","close_button:is_shown","close_button:render","close_button:show","close_button:show_timer_tick"],animation:{hidden:"-26px",shown:"0"},init:function(){return this.params={isVideo:"video"===this.core.params.behavior,tick:0,showCloseButton:!this.core.params.inread&&this.core.loaded_data.player_show_skip_button_before_play&&this.core.loaded_data.auto_play<=0},this.widgetInit()},animate:function(e){if(this.closeButton)return this.closeButton.style.top=this.animation[e?"shown":"hidden"]},render:function(e){var n;return e||(e=this.callStrategy("close_button:get_target")),n=t.createElement("div"),n.className="buzz__skip__button buzz__hidden buzz__not__allowed",!this.core.params.inread&&this.params.isVideo||i.utils.add_class("transparent",n),n.innerHTML='<div class="buzz__skip__button__cross"><div class="buzzplayer-svg-sprite"></div></div>\n<div class="buzz__skip__button__text"></div>',e.appendChild(n),this.closeButton=n,this.closeButtonText=n.querySelector(".buzz__skip__button__text"),(this.animationSupported=this.callStrategy("animation:supported","expandable"))&&(i.utils.add_class("buzz__animation__top",n),this.animate(this.callStrategy("animation:status"))),this.params.isVideo||this.startShowTimer(),n},isShown:function(){return this.params.showCloseButton},getButton:function(){return this.closeButton},showDefaultStrategy:function(){var e;if(this.closeButton)return this.core.params.inread?i.utils.add_class("image",this.closeButton):(e="\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c",i.utils.setText(this.closeButtonText,e),i.utils.add_class("text",this.closeButton)),i.utils.remove_class("buzz__not__allowed",this.closeButton),i.utils.remove_class("buzz__hidden",this.closeButton)},show:function(e){return this.params.showCloseButton=!0,this.initCloseButtonClickHandler(),this.callStrategy("close_button:show",this.closeButton,e)},hide:function(){if(this.params.showCloseButton=!1,this.closeButton)return i.utils.add_class("buzz__hidden",this.closeButton)},getTarget:function(){return this.params.isVideo&&"fullscreen"!==this.core.state.format&&this.core.wrap||this.core.wrap_html},initCloseButtonClickHandler:function(){if(this.closeButton&&!this.initialHandlersCloseButton)return this.initialHandlersCloseButton=!0,i.utils.add_event_listener("click",function(e){return function(t){return e.handleClick(t)}}(this),this.closeButton)},handleClick:function(e){if(i.utils.stopPropagation(e),!(this.closeButton.className.indexOf("buzz__not__allowed")>=0))return this.core.params.overroll||"fullscreen"===this.core.state.format||this.core.params.inread&&!this.core.params.expandable?(this.trigger("close_button:click"),setTimeout(function(e){return function(){return e.core.destroy()}}(this),0)):(this.core.collapse(!0),setTimeout(function(e){return function(){return e.trigger("close_button:click")}}(this),0))},startShowTimer:function(){if(!(this.params.isVideo&&this.params.showCloseButton||this.params.showSkipSeconds===-3))return clearTimeout(this.timer),++this.params.tick>=this.params.showSkipSeconds?this.show():(this.callStrategy("close_button:show_timer_tick",this.params.showSkipSeconds,this.params.tick,this.closeButton),this.timer=setTimeout(function(e){return function(){return e.startShowTimer()}}(this),1e3))},showTimerTick:function(e,t){var n;if(this.closeButton&&!this.core.params.inread)return n=e-t,(!n||n<0)&&(n=0),i.utils.setText(this.closeButtonText,this.getMessage(n)),i.utils.add_class("text",this.closeButton),i.utils.remove_class("buzz__hidden",this.closeButton),i.utils.add_class("buzz__not__allowed",this.closeButton)},defaultShowSkipSeconds:function(){return this.params.showSkipSeconds=+this.core.loaded_data.player_show_skip_button_seconds||0}},n=function(e){var t,i,n;i=[];for(t in o)n=o[t],i.push(e[t]=n);return i},n.handlesEvents=r,i.Modules.Mixins.CloseButton=n}(window,document,Buzzoola),function(e,t,i){var n,r,o;return n=function(){var e;return e="overroll"===this.moduleName?2:4,this.core.callStrategyByMaxPriority("destroy",e),this.core.container&&("overroll"===this.moduleName?this.removeForeground():this.foreground&&this.foreground.parentElement&&this.core.container.removeChild(this.foreground)),this.stopDestructionTimer()},o=function(){var e;return e=this.callStrategy(this.moduleName+":getWaitAndDestroyIfInactiveTime")||this.defaultWaitAndDestroyIfInactiveTime,this.inactivityDestructionTimer=setTimeout(function(t){return function(){return setTimeout(function(){return t.trigger(t.moduleName+":destroy_inactive")},0),t.core.destroy(),t.core.log("Destroyed for inactivity over "+e+" seconds")}}(this),1e3*e)},r=function(){return clearTimeout(this.inactivityDestructionTimer)},i.Modules.Mixins.Destruction=function(e){return e.destroy=n,e.waitAndDestroyIfInactive=o,e.stopDestructionTimer=r}}(window,document,Buzzoola),function(e,t,i){var n,r,o,s;return r=0,n=function(e,i){var n;return n=t.createElement("iframe"),n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),n.setAttribute("height","0"),n.setAttribute("width","0"),n.setAttribute("name",this.core.params.id+"_"+r++),this.iframeUrl=n.src=e,(i||this.core.embed_container).appendChild(n),n},s=function(e){var t;this.iframe&&this.onload?null!=(t=this.iframe.contentWindow)&&t.postMessage(JSON.stringify(e),this.iframeUrl):setTimeout(function(t){return function(){return t.sendPostMessage(e)}}(this),300)},o=function(){var e;if(e=function(e){return function(t){var n,r;if(e.iframeDomain.match(t.origin))try{if(n=i.utils.Base64.decode(t.data),n=i.utils.JSON.parse(n),n.id!==e.id)return;"onload"===n.method&&(e.onload=!0),e.iframeHandler&&e.iframeHandler(null,n)}catch(o){r=o}}}(this),i.utils.add_event_listener("message",e),!this.preventClear)return this.core.on("terminated",function(){return setTimeout(function(){return i.utils.remove_event_listener("message",e)},1e3)},!0)},i.Modules.Mixins.Iframe=function(e){return e.createIframe=n,e.initEventHandlerIframe=o,e.sendPostMessage=s}}(window,document,Buzzoola),function(t,i,n){var r,o,s;return o={drawn:function(){return this.renderPlank(),this.initHandlersPlank()},"event:tick":function(e){if(this.showOnTick(e))return this.animate(!0)},"widget:resize":function(){var t;if(t=1<=arguments.length?e.call(arguments,0):[],this.params.width=t[0],this.params.height=t[1],this.params.resized=!0,this.params.drawn)return this.resize()},"event:state":function(e){if("finish"===e&&this.restoreParams)return n.utils.extend(this.params,this.restoreParams),this.restoreParams=null},"engagement:user_left_page":function(){var e,t,i,r,o,s,a,l,u;if(n.utils.bowser.mobile||n.utils.bowser.tablet){for(this.restoreParams={},l=["showOnTick","showTime"],t=0,r=l.length;t<r;t++)s=l[t],this.restoreParams[s]=this.params[s];if(this.params.showOnTick=!1,this.params.showTime=this.core.callStrategy("widget:getCurrentTime")+3,this.params.isShown=!1,clearTimeout(this.hideTimer),n.utils.remove_class(this.params.fullClass,this.plank),"install"===this.core.loaded_data.click_event_view)return n.utils.add_class(this.params.hiddenClass,this.plank);for(n.utils.remove_class(this.params.hiddenClass,this.plank),e=this.getPlankClasses(),u=[],i=0,o=e.length;i<o;i++)a=e[i],u.push(n.utils.add_class(a,this.plank));return u}}},s={init:function(){return this.params={},this.initAdditionalParams(),this.initCustomParams(),this.initTimeParams()},initAdditionalParams:function(){return this.params.isMobile=n.utils.bowser.mobile||n.utils.bowser.tablet,this.params.isShown=!1,this.params.wasHiddenOnProgress=!1,this.params.drawn=!1,this.params.resized=!1},initTimeParams:function(){var e,t,i;return i=this.core.loaded_data,t=i.overlay_start,e=i.overlay_close,this.params.showOnTick=t===e&&0===e,this.params.showOnTick?this.params.tickToShow=2:(this.params.showTime=t,this.params.hideTime=e)},initHandlersPlank:function(){if(n.utils.add_event_listener("click",function(e){return function(){return e.callStrategy("clickthrough_URL:open")}}(this),this.plank),n.utils.remove_event_listener("touchstart",function(e){return function(){return n.utils.add_class("buzzplayer-icon-bg-black-touch",e.plank)}}(this),this.plank),n.utils.add_event_listener("touchend",function(e){return function(){return n.utils.remove_class("buzzplayer-icon-bg-black-touch",e.plank)}}(this),this.plank),this.params.reactOnHover)return n.utils.add_event_listener("mouseover",function(e){return function(){return e.animate(!0),clearTimeout(e.hideTimer)}}(this),this.plank),n.utils.add_event_listener("mouseout",function(e){return function(){return e.delayedHide()}}(this),this.plank)},resize:function(){var e,t,i,r,o;for(e=null,r=this.availableSizes,t=0,i=r.length;t<i;t++)if(o=r[t],o>this.params.width){e=o;break}if(e!==this.params.currentMod)return null!=this.params.currentMod&&n.utils.remove_class(this.getModClassName(this.params.currentMod),this.plank),null!=e&&n.utils.add_class(this.getModClassName(e),this.plank),this.params.currentMod=e},delayedHide:function(){if(!this.couldNotHide())return clearTimeout(this.hideTimer),this.hideTimer=setTimeout(function(e){return function(){return e.animate(!1)}}(this),5e3)}},r=function(e){var t,i,r;e.handlesEvents=n.utils.extend({},e.handlesEvents,o),i=[];for(t in s)r=s[t],i.push(e[t]=r);return i},r.handlesEvents=o,n.Modules.Mixins.Plank=r}(window,document,Buzzoola),function(e,t,i){var n,r;return n=function(e){var t,n,r,o,s,a;return null==e&&(e={}),a=null!=(o=e.width)?o:134,n=null!=(s=e.height)?s:11,r=i.utils.bowser.tablet||i.utils.bowser.mobile,t=r?"buzz-ad-power_mobile-engage":"",'<div class="buzz-ad-power '+t+'">\n\t<svg viewBox="0 0 '+a+" "+n+'">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#buzz_powered"></use>\n\t</svg>\n</div>'},r=function(t,n){var r,o;if(null==t&&(t=this.core.wrap_html),o=encodeURIComponent(e.location.hostname),null==n&&(n="https://buzzoola.com?utm_source=buzzoola_network&utm_medium=direct_link&utm_campaign=engageroll_branding&utm_term="+o),r=t.querySelector(".buzz-ad-power"),null!=r)return i.utils.add_event_listener("click",function(e){return function(t){return t.stopPropagation(),i.utils.openLink(n,e.core.params.is_ios)}}(this),r)},i.Modules.Mixins.PoweredBy=function(e){return e.getPoweredButton=n,e.subscribeToPoweredClick=r}}(window,document,Buzzoola),function(e,t,i){var n,r,o,s;return n=["onwheel","ontouchmove"],r=function(){var t,i,r,o;for(o=[],i=0,r=n.length;i<r;i++)t=n[i],o.push(e[t]=this.preventDefault);return o},s=function(){var t,i,r,o;for(o=[],i=0,r=n.length;i<r;i++)t=n[i],
o.push(e[t]=null);return o},o=function(t){return t=t||e.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1},i.Modules.Mixins.ScrollLock=function(e){return e.lockScroll=r,e.releaseScroll=s,e.preventDefault=o}}(window,document,Buzzoola),function(e,t,i){var n,r,o,s,a,l,u,c;return s=function(){this.player=this.core.wrap_html.querySelector(".buzz-maxiscroll__video")||this.core.wrap_html.querySelector(".buzz-scroll__video"),this.wrap=this.core.wrap_html.querySelector(".buzz-maxiscroll__wrapper")||this.core.wrap_html.querySelector(".buzz-scroll__wrapper"),this.widgetFirstSeen=!1,this.widgetAdSeen=null,this.watchedWindows=[],this.player&&(this.played=!1),i.utils.add_event_listener("scroll",function(e){return function(){e.checkPositions()}}(this),e),this.checkPositions()},l=function(){var e;return null!=this.centerTimeout&&clearTimeout(this.centerTimeout),this.isScrolling?void(this.centerTimeout=setTimeout(function(e){return function(){return e.setCenterOfPlayer()}}(this),150)):void(this.player&&(e=this.player.getBoundingClientRect(),this.playerPos=i.utils.extend({},e),this.playerPos.center=(e.bottom+e.top)/2,this.playerSeen()))},r=function(){var e,t;return e="scroller"===this.core.loaded_data.content_type,t=e?this.core.params.height:this.core.params.screenHeight},n=function(){var t,n,r;for(this.wrapHeight=this.getWrapHeight(),this.wrapperTopPos=this.wrap.getBoundingClientRect().top,r=e;r.parent!==r&&(t=i.utils.getCurrentFrame(r),null!=t);)this.wrapperTopPos+=null!=(n=t.getBoundingClientRect().top)?n:0,r=r.parent,this.watchedWindows.indexOf(r)===-1&&(this.watchedWindows.push(r),i.utils.add_event_listener("scroll",function(e){return function(){e.checkPositions()}}(this),r));this.player&&this.playerSeen(),this.widgetSeen()},o=function(){this.playerPos&&(this.widgetFirstSeen||this.widgetSeen(),this.wrapperTopPos<this.playerPos.center&&this.wrapperTopPos+this.wrapHeight>this.playerPos.center?this.played||this.setPlayed():this.played&&(this.trigger("widget:player:unseen"),this.played=!1))},u=function(){null!=this.player&&(this.played=!0,this.trigger("widget:player:seen"))},c=function(e){var t,i,n,r,o;null==e&&(e=!1),r=this.core.params.screenHeight,n=this.wrapperTopPos>=r||this.wrapperTopPos+this.wrapHeight<0?0:this.wrapperTopPos>0?100-100*(this.wrapperTopPos+this.wrapHeight-r)/this.wrapHeight:100*(this.wrapperTopPos+this.wrapHeight)/this.wrapHeight,t=n>=50,t!==this.widgetAdSeen&&(this.widgetAdSeen=t,this.widgetAdSeen?(this.trigger("engagement:seen"),this.widgetAdSeen=!0):(this.trigger("engagement:unseen"),this.widgetAdSeen=!1)),this.widgetFirstSeen||(i=this.wrapperTopPos<r-50&&this.wrapperTopPos>0,o=this.wrapperTopPos+this.wrapHeight>50&&this.wrapperTopPos<0,(i||o||e)&&(this.trigger("engagement:seenFirstTime"),this.widgetFirstSeen=!0))},a={"window:scroll":function(e){this.isScrolling=e},"before:destroyed":function(){for(;this.watchedWindows.length;)this.watchedWindows.pop();return this.watchedWindows=null}},i.Modules.Mixins.ScrollerWidgetPlayerSeen=function(e){i.utils.extend(e.handlesEvents,a),e.playerSeenCheck=s,e.setCenterOfPlayer=l,e.playerSeen=o,e.setPlayed=u,e.getWrapHeight=r,e.checkPositions=n,e.widgetSeen=c}}(window,document,Buzzoola),function(t,i,n){var r,o;return r=function(){var e;return this.sendPlayerSeen=null==(e=this.core.options)||!e.vpaidJSProxy||"application/javascript"===this.core.loaded_data.content.mimeType||(this.core.on("event:state",function(e){return function(t){if("start"===t)return e.sendPlayerSeen=!0}}(this)),!1)},o=function(){var t,i;return i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],"player_seen"!==i||this.sendPlayerSeen?this._sendEvent.apply(this,[i].concat(e.call(t))):setTimeout(function(n){return function(){return n.sendEvent.apply(n,[i].concat(e.call(t)))}}(this),100)},n.Modules.Mixins.VideoPlayerSeen=function(e){return e.init=r,e.sendEvent=o}}(window,document,Buzzoola),function(t,i,n){return n.Modules.BaseAPIEventSender=function(){function t(t){var i,r,o,s;this.core=t,this.allowedEvents=n.utils.extend([],this.allowEvents[this.core.loaded_data.content_type])||[],this.core.options.parent_core&&this.allowedEvents.splice(this.allowedEvents.indexOf("player_seen"),1),o=this.onEvents,r=function(t){return function(i,r){return t.core.on(i,function(){var i,o;return i=1<=arguments.length?e.call(arguments,0):[],o=n.utils.isFunction(r)?r.apply(t,i):r,t.sendEvent.apply(t,[].concat(o,i))},!0)}}(this);for(i in o)s=o[i],r(i,s);this.init&&this.init.apply(this,Array.prototype.slice.call(arguments))}return t.prototype.sendEvent=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],this._sendEvent.apply(this,t)},t.prototype._sendEvent=function(){var t,i,n,r;if(i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],this.allowedEvents.indexOf(i)!==-1)return r=(this.paramsEventData||{})[i],n=r?r.apply(this,t):{},this.core.callStrategy("api:sendEvent",i,this.core.state.slice||0,n)},t}()}(window,document,Buzzoola),function(i,n,r){var o;return o=function(){var e,t,i,n,r,o,s,a,l,u;if(!this.preventClear){o=this.reloadData.events;for(t in o)n=o[t],i=this.core.events[t],r=i.indexOf(n),r!==-1&&i.splice(r,1);s=this.reloadData.strategies,a=[];for(u in s)e=s[u],l=this.core.strategies[u]||[],a.push(this.core.strategies[u]=l.filter(function(t){return!(t.priority===e.priority&&t.fn===e.fn)}));return a}},r.Modules.BaseModule=function(){function i(e){this.core=e,this.reloadData={strategies:{},events:{}},this.initEventHandlers(),this.initStrategies(),this.init&&this.init.apply(this,Array.prototype.slice.call(arguments))}return i.prototype.initEventHandlers=function(){var e,t,i,n;null==this.handlesEvents&&(this.handlesEvents={}),this.preventClear||(this.handlesEvents["tube:reload"]=o),i=this.handlesEvents,n=[];for(e in i)t=i[e],n.push(function(e){return function(t,i){var n;return n=e.reloadData.events[t]=function(){return i.apply(e,Array.prototype.slice.call(arguments))},e.core.on(t,n,!0)}}(this)(e,t));return n},i.prototype.callStrategy=function(e){if(t.call(this.callsStrategies,e)>=0)return this.core.callStrategy.apply(this.core,Array.prototype.slice.call(arguments))},i.prototype.trigger=function(e){if(t.call(this.triggersEvents,e)>=0)return this.core.trigger.apply(this.core,Array.prototype.slice.call(arguments))},i.prototype.initStrategies=function(){var t,i,n,r,o,s,a,l;if(this.addsStrategies){for(s=this.addsStrategies,l=[],t=0,i=s.length;t<i;t++)a=s[t],r=a[0],o=a[1],n=a[2],l.push(function(t){return function(i,n,r){var o;return"string"==typeof r&&(r=t[r]),o=function(){var i;return i=1<=arguments.length?e.call(arguments,0):[],r.apply(t,i)},t.reloadData.strategies[i]={priority:n,fn:o},t.core.addStrategy(i,n,o)}}(this)(r,o,n));return l}},i}()}(window,document,Buzzoola),function(e,t,n){return n.Modules.BaseShareButtons=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.triggersEvents=["share_button:clicked"],r.prototype.init=function(){var t;return this.myShareFqdn={dev:"http://devmy.buzzoola.com",prod:"http://my.buzzoola.com",debug:"http://devmy.buzzoola.com"}[this.core.environment],this.buzzHash=this.core.loaded_data.hash_to_embed,this.parentFqdn=e.BUZZOOLA.hosted,this.content=this.core.loaded_data.main_content,this.contentType=this.core.loaded_data.content_type,this.title=this.core.loaded_data.title,this.shareButtons=this.core.loaded_data.share_buttons,this.sideShareButtons=this.core.params.side_share_buttons?this.core.params.side_share_buttons:!this.core.loaded_data.share_panel_position||"left"!==(t=this.core.loaded_data.share_panel_position)&&"top"!==t&&"right"!==t&&"bottom"!==t&&"overlay_bottom"!==t?"right":this.core.loaded_data.share_panel_position,this.hostedFqdn={facebook:"facebook.com",vkontakte:"vk.com",twitter:"twitter.com",moimir:"moimir.mail.ru",odnoklassniki:"odnoklassniki.ru"}},r.prototype.share=function(e){var t,i;switch(i=function(){switch(this.contentType){case"youtube_id":return"http://www.youtube.com/watch?v="+this.content;case"rutube_id":return"https://rutube.ru/video/"+this.content;default:return encodeURIComponent(this.myShareFqdn+"/tube/play/"+this.buzzHash+"? parentFQDN="+this.parentFqdn+"%26 hostedFQDN="+this.hostedFqdn[e])}}.call(this),t="",e){case"facebook":t="http://www.facebook.com/sharer/sharer.php?u="+i;break;case"vkontakte":t="http://vk.com/share.php?url="+i;break;case"twitter":t="http://share.yandex.ru/go.xml?url="+i+"&title="+encodeURIComponent(this.title)+"&service=twitter";break;case"moimir":t="http://connect.mail.ru/share?share_url="+i;break;case"odnoklassniki":t="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl="+i;break;default:return}return this.trigger("share_button:clicked",e),n.utils.openLink(t,this.core.params.is_ios)},r}(n.Modules.BaseModule)}(window,document,Buzzoola),function(i,n,r){return r.Core=function(){function o(e,t){var n,o;this.embed_container=e,this.options=null!=t?t:{},this.sendedErrors=[],this.embed_container.controller=this,this.strategies={},this.events={},this.state={format:"native",drawn:!1},this.protocol=r.utils.getProtocol(),this.environment=this.getEnvironment(),this.apiEnv=this.embed_container.getAttribute("data-debug_api")||this.environment,this.reloaded=!1,this.canReloadBrokenAd=!0,this.adsToPlay=0,this.totalAds=0,this.currentAd=0,this.readyFirstTime=!1,this.seenFirstTime=!1,this.on("engagement:seenFirstTime",function(e){return function(){return e.seenFirstTime=!0}}(this)),this.on("error",function(e){return function(t,i){return e.state.error=!0,i&&e.sendError(t),e.log("%cerror:","color:rgb(240,58,66);",t),e.canReloadBrokenAd&&(e.adsToPlay<e.totalAds?e.totalAds--:e.currentAd++,e.seenFirstTime||(e.readyFirstTime=!1)),e.destroy()}}(this)),this.on("warning",function(e){return function(t,i){return i&&e.sendError(t),e.log("%cwarning:","color:rgb(234,166,27);",t)}}(this)),this.on("event:state",function(e){return function(t){var i;if("ready"===t)return e.readyFirstTime||(i=Date.now(),e.idleInterval=setInterval(function(){if(Date.now()-i>=9e6)return e.trigger("error","player ttl exceeded")},6e4)),e.canReloadBrokenAd=!1,++e.currentAd>1&&e.readyFirstTime&&setTimeout(function(){return e.callStrategy("overroll:showAndPlay")},1),e.readyFirstTime=!0}}(this)),this.on("api:ads_total",function(e){return function(t,i){e.adsToPlay=t,e.totalAds=i}}(this)),null!=(n=this.options.parent_core)&&null!=n.on&&n.on("before:destroyed",function(e){return function(){return e.destroy(!0)}}(this)),this.initialParams={version:r.utils.extend({},Buzzoola.version),is_ios:"ios"===this.embed_container.getAttribute("data-platform"),debug_mode:this.getDataAttribute("debug_mode"),id:"buzzframe_"+r.utils.guid(),parent:this.embed_container.getAttribute("data-pid")||"pub",content:this.embed_container.getAttribute("data-hash"),width:"100%",height:"",slugname:this.embed_container.getAttribute("data-slugname")||"",container_height:"",fullscreen:!1,overroll:!1,expandable:!1,inread:!1,target:null,align:null,clickunder_selector:null,origin:{dev:this.protocol+"//devtube.buzzoola.com/new",prod:this.protocol+"//tube.buzzoola.com/new",debug:this.protocol+"//localtube.buzzoola.com:8000",test:this.protocol+"//"+i.location.host}[this.environment],apiUrl:{dev:this.protocol+"//devexchange.buzzoola.com",prod:this.protocol+"//exchange.buzzoola.com",debug:this.protocol+"//devexchange.buzzoola.com",test:this.protocol+"//devexchange.buzzoola.com"}[this.apiEnv],logmill:"https://devlogmill.buzzoola.com",logmill_env:{dev:"dev_front_tube",prod:"prod_front_tube",debug:"dev_front_tube",test:"dev_front_tube"}[this.environment],stylesheet_paths:["/build/style.css"]},!this.embed_container.hasAttribute("data-side-share-buttons")||"left"!==(o=this.embed_container.getAttribute("data-side-share-buttons"))&&"top"!==o&&"right"!==o&&"bottom"!==o||(this.initialParams.side_share_buttons=this.embed_container.getAttribute("data-side-share-buttons")),this.airbrake=new r.utils.airbrakeJs.Client({projectId:1}),this.airbrake.setHost(this.initialParams.logmill),this.airbrake.addFilter(function(e){return function(t){return t.context.environment=e.initialParams.logmill_env,t}}(this)),this.loadStylesheets(),this.reload(!1),r.Modules.CustomHtmlWrap||this.loadExtraLib()}return o.prototype.asyncModuleLoad={API:function(){var e,t;return e={},(this.loaded_data.vastParsed||"vast"===(t=this.loaded_data.content_type)||"vast2"===t||"vast3"===t||"vast4"===t||"audioroll"===t||"vpaid"===t||"vpaidjs"===t)&&(e.VAST=!1),this.loaded_data.branding_template&&(e.Branding=!1),e}},o.prototype.loadExtraLib=function(){return r.utils.loadExtra(this.params.origin+"/build/buzzlibrary_extra.js",function(e){return function(t){return t?e.trigger("error","not loaded buzzlibrary_extra"):e.trigger("buzzlibrary_extra:loaded")}}(this))},o.prototype.reload=function(e){var t,i;return null==e&&(e=!0),this.params=r.utils.extend({},this.initialParams),this.adsLoaded=!1,e&&(this.reloaded=!0,this.canReloadBrokenAd=!0,null!=(t=this.wrap_html)&&null!=(i=t.parentNode)&&i.removeChild(this.wrap_html),this.state.drawn=!1,this.state.seen=null,this.trigger("tube:reload"),this.clearLoadedEvents()),this.initModules(),this.initAsyncModules()},o.prototype.couldBeReloaded=function(){var e;return this.canReloadBrokenAd||("overroll"===(e=this.state.format)||"expandable"===e)&&this.currentAd<this.adsToPlay},o.prototype.clearLoadedEvents=function(e){var t,i,n,o;if(null==e&&(e=this.asyncModuleLoad),r.utils.isFunction(e)&&(e=e.call(this)),i=Object.keys(e).length){o=[];for(n in e)t=e[n],this.events[n.toLowerCase()+":loaded"]=[],o.push(t&&this.clearLoadedEvents(t));return o}},o.prototype.initModules=function(){return r.utils.initModules(this,{DefaultSize:!0,Destroy:!0,Loader:!this.reloaded,UserEngagement:!0,WeboramaUserTracker:!1})},o.prototype.initAsyncModules=function(e){var t,i,n,o,s,a;if(null==e&&(e=this.asyncModuleLoad),r.utils.isFunction(e)&&(e=e.call(this)),n={},o=0,s=Object.keys(e).length){i=function(e){return function(t,i){return"API"===t&&e.reloaded||(n[t]=!0),e.on(t.toLowerCase()+":loaded",function(){return++o,i?e.initAsyncModules(i):o===s?e.initParams():void 0})}}(this);for(a in e)t=e[a],i(a,t)}else this.initParams();return r.utils.initModules(this,n)},o.prototype.getDataAttribute=function(e){var t,i;return t=function(){switch(e){case"clickunder_selector":return"data-selector";case"debug_mode":return"data-debug";case"container_height":return"data-container-height";default:return"data-"+e}}(),i=function(){switch(e){case"expandable":return("true"===this.embed_container.getAttribute("data-expandable")||"not_collapse"===this.embed_container.getAttribute("data-expandable")||"true"===this.embed_container.getAttribute("expandable"))&&!this.params.is_ios;case"debug_mode":case"fullscreen":case"overroll":return this.embed_container.hasAttribute(t);default:return this.embed_container.getAttribute(t)}}.call(this),null!=i?i:this.params[e]},o.prototype.initParams=function(){var e,i,n,o,s,a,l,u,c,d;i=this.loaded_data,c=(null!=(a=i.unit_settings_list)?a.length:void 0)>0?i.unit_settings_list:["align","clickunder_selector","container_height","debug_mode","expandable","fullscreen","height","overroll","target","width"],u=null!=i.unit_settings?i.unit_settings:c.reduce(function(e){return function(t,i){return t[i]=e.getDataAttribute(i),t}}(this),{}),u.inread=c.indexOf("expandable")!==-1,e=null!=(l=i.player_data_attributes)?l:{};for(o in e)d=e[o],t.call(c,o)>=0&&null!==d&&""!==d&&"default"!==d&&(u[o]=d);return null!=(s=u.overroll)&&(this.params.overrollBehavior=s,u.overroll=s===!0||"show"===s||"default"===s||"onclick"===s),null!=(n=u.expandable)&&(this.params.minimize="minimize"===n,u.expandable="always"===n||"minimize"===n||"default"===n||"never"!==n&&n),null==u.debug_mode&&(u.debug_mode=this.params.debug_mode),r.utils.extend(this.params,u),this.params.percent_width=this.params.width.indexOf("%")!==-1,this.initAfterLoaded()},o.prototype.initAfterLoaded=function(){var e;return this.params.behavior=function(){switch(this.loaded_data.content_type){case"image_url":return"tgb";case"vast":case"youtube_id":case"video_url":case"vpaid":case"facebook":case"audioroll":case"vimeo":case"rutube_id":return"video";case"carousel":case"scroller":case"maxiscroller":case"clickunder":case"showcase":return this.loaded_data.content_type;default:return"undefined"}}.call(this),this.params.fullscreen&&"tgb"!==(e=this.params.behavior)&&"video"!==e?void this.trigger("error","unsupported content type for fullscreen format"):(this.log("Player Data Loaded",this.loaded_data),this.trigger("core:ads_loaded"),this.adsLoaded=!0,2===r.utils.extraLibState||r.Modules.CustomHtmlWrap?(this.initModulesAfterDataLoaded(),this.draw()):this.on("buzzlibrary_extra:loaded",function(e){return function(){return e.initModulesAfterDataLoaded(),e.draw()}}(this)))},o.prototype.initModulesAfterDataLoaded=function(){var e,t,i,n,o,s,a,l,u,c,d,h,p,f,m,v,g,y,_,b,w;if(!this.state.destroyed){if(c=this.loaded_data,t=r.utils.bowser,(("vimeo"===c.content_type||c.content.vr)&&(t.mobile||t.tablet)||"vpaid"===c.content_type&&"application/javascript"===c.content.mimeType&&t.safari&&+t.version>=11)&&(c.auto_play=!1),l="video"===this.params.behavior,s=this.params.overroll,o=this.params.inread,n=this.params.fullscreen,i=c.content_type,a=["scroller","maxiscroller"].indexOf(i)!==-1,m=(f=this.options.parent_core)&&!!~["scroller","maxiscroller"].indexOf(f.loaded_data.content_type),!s&&null!=(null!=(v=this.embed_container)?v.childNodes:void 0))for(e=this.callStrategy("api:getIframe"),h=this.callStrategy("loader:getElement"),g=Array.prototype.slice.call(this.embed_container.childNodes),u=0,d=g.length;u<d;u++)p=g[u],p&&p!==e&&p!==h&&null!=(y=this.embed_container.parentElement)&&y.insertBefore(p,"under"===this.params.overrollBehavior?this.embed_container:this.embed_container.nextSibling);return r.utils.initModules(this,{AdsCounter:(s||o)&&this.adsToPlay>1,MrcImpChecker:!("carousel"===(_=null!=(b=this.options)&&null!=(w=b.parent_core)?w.params.behavior:void 0)||"showcase"===_),Expandable:this.params.expandable,Overroll:s,FullscreenAd:n,PositionInsideEmbedBlock:!0,PositionDynamically:this.params.target,ViewportOrientation:n,CloseButtonTGB:!l&&(s||o||n),CloseButtonVideo:l&&(s||o&&"infeed_video"!==i||n),CustomHtmlWrap:!!c.custom_html,CustomJs:!!c.custom_js,ClickthroughURL:!0,ClickthroughURLCloseButton:c.skip_clickthru,ImageOnHover:!!c.content.image_for_video_on_hover,MOAT:"tgb"===this.params.behavior&&c.enable_moat,TrackingUrl:"object"==typeof c.tracking_url||"object"==typeof c.tracking_js,YandexMetrik:!!c.ya_id,HrefHandler:!0,Resize:!0,ScrollerWrap:a,ScrollDetector:t.ios&&(l&&m||a),SvgManager:!0,Wrap:!0}),this.initWidget()}},o.prototype.initWidget=function(){if(null==(null!=this.container?this.container:this.container=this.callStrategy("get_container",this)))return this.trigger("error","Could not get container");switch(this.trigger("got_container"),this.params.behavior){case"video":return new r.Modules.Widgets.Player.Core(this);case"tgb":return new r.Modules.Widgets.TGB.Core(this);case"carousel":return new r.Modules.Widgets.Carousel.Core(this);case"scroller":return new r.Modules.Widgets.Scroller.Core(this);case"maxiscroller":return new r.Modules.Widgets.Maxiscroll.Core(this);case"clickunder":return new r.Modules.Widgets.Clickunder.Core(this);case"showcase":return new r.Modules.Widgets.Showcase.Core(this);default:return this.trigger("error","content type is not defined")}},o.prototype.loadStylesheets=function(){var e;for(e=0;e<this.initialParams.stylesheet_paths.length;)r.utils.add_stylesheet(this.initialParams.origin+this.initialParams.stylesheet_paths[e]),e++;return r.utils.addStyles('.buzzplayer-svg-sprite, .buzzplayer-icon span {\n\tbackground-image: url("'+this.initialParams.origin+'/img/svg-sprites/icons.svg");\n}\n\n.buzzplayer-ads-overlay-close {\n\tbackground-image: url("'+this.initialParams.origin+'/img/close_button.png");\n}')},o.prototype.draw=function(){var e,t;if("clickunder"!==this.params.behavior&&!this.state.drawn&&!this.state.destroyed)return r.utils.bowser.mobile||r.utils.bowser.tablet?r.utils.add_class("buzzplayer-touch",this.container):r.utils.add_class("buzzplayer-notouch",this.container),"overroll"!==this.state.format&&(e=function(){switch(this.params.align){case"left":return"0 auto 0 0";case"right":return"0 0 0 auto";default:return null}}.call(this),e&&(this.container.style.margin=e)),this.wrap_html=this.callStrategy("get_wrap"),this.container.appendChild(this.wrap_html),this.wrap=this.container.querySelector("div.buzz_code"),this.trigger("got_wrap",this.wrap_html),t=document.createElement("div"),t.id=this.params.id,this.wrap.appendChild(t),this.widget_div=t,this.trigger("drawn"),this.state.drawn=!0},o.prototype.destroy=function(e){var t,i;if(null==e&&(e=!1),this.state.destroyed!==!0)return t=e||!(this.couldBeReloaded()&&this.callStrategy("api:getNextCreative")),this.trigger("before:destroyed"),(t||this.adsLoaded&&("overroll"===(i=this.state.format)||"fullscreen"===i))&&this.callStrategy("destroy"),t&&(this.state.destroyed=!0,this.state.state="destroyed",this.trigger("destroyed"),clearInterval(this.idleInterval)),this.trigger("terminated",t),t?void 0:this.reload()},o.prototype.collapse=function(e){return this.state.collapsing=!0,this.callStrategy("collapse",e)},o.prototype.getEnvironment=function(){var e,t,i,r,o;if(e=this.embed_container.getAttribute("data-debug_env"))return e;t=null,o=n.getElementsByTagName("script");for(i in o)if(r=o[i],"object"==typeof r&&r.src.indexOf("buzzlibrary.js")>0){t=0===r.src.indexOf(this.protocol+"//dev")?0:1;break}return t?"prod":"dev"},o.prototype.addStrategy=function(e,t,i){return this.strategies[e]=this.strategies[e]||[],this.strategies[e].push({priority:t,fn:i})},o.prototype.callStrategyByMaxPriority=function(){var t,i,n,r,o,s,a,l,u,c,d;if(l=arguments[0],u=arguments[1],t=3<=arguments.length?e.call(arguments,2):[],!(this.strategies[l]&&this.strategies[l].length>0))return null;for(i=-1,n=-1,c=this.strategies[l],o=s=0,a=c.length;s<a;o=++s)d=c[o],d.priority<=u&&d.priority>=n&&(n=d.priority,i=o);try{return this.strategies[l][i].fn.apply(this,t)}catch(h){return r=h,this.sendError(r,!0),this.log(r)}},o.prototype.callStrategy=function(){var t,i;return i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],this.callStrategyByMaxPriority.apply(this,[].concat(i,Number.MAX_VALUE,t))},o.prototype.on=function(e,t,i){return this.events[e]||(this.events[e]=[]),i&&(t.sendError=!0),this.events[e].push(t),this},o.prototype.trigger=function(){var t,i,n,r,o,s,a;if(n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],this.events[n]){for(s=this.events[n].slice(),a=[],r=0,o=s.length;r<o;r++)i=s[r],a.push(function(e){return function(i){var n;try{return i.apply(e,t)}catch(r){return n=r,i.sendError&&e.sendError(n,!0),e.log(n)}}}(this)(i));return a}},o.prototype.log=function(){if(this.params.debug_mode)return console.log("     "),console.log.apply(console,arguments),console.log("     ")},o.prototype.sendError=function(e,t){var i,n,r,o;if(t){for(o=this.sendedErrors,n=0,r=o.length;n<r;n++)if(i=o[n],(null!=i?i.stack:void 0)===(null!=e?e.stack:void 0))return;return this.airbrake.notify({error:e,params:{loaded_data:JSON.stringify(this.loaded_data||{}),params:JSON.stringify(this.params||{})}}),this.sendedErrors.push(e)}if("nobanner probably"!==e)try{throw new Error(e)}catch(s){return i=s,this.sendError(i,!0)}},o}()}(window,document,Buzzoola),function(e,t,n){return n.Modules.AdsCounter=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,e),r.prototype.handlesEvents={"event:state":function(e){if("ready"===e)return this.setData()},drawn:function(){return this.draw()},"before:destroyed":function(){var e;return null!=(e=this.counter)&&e.parentNode.removeChild(this.counter),this.counter=null},"api:ads_total":function(){return this.setData()}},r.prototype.init=function(){return this.params={isVideo:"video"===this.core.params.behavior}},r.prototype.draw=function(){var e;return e=t.createElement("div"),e.className="buzz__ads__counter",this.params.isVideo||n.utils.add_class("transparent",e),this.core.wrap.appendChild(e),this.counter=e,this.setData()},r.prototype.setData=function(){if(null!=this.counter)return n.utils.setText(this.counter,"\u0420\u0435\u043a\u043b\u0430\u043c\u0430 "+this.core.currentAd+" \u0438\u0437 "+this.core.adsToPlay)},r}(n.Modules.BaseModule)}(window,document,Buzzoola),function(t,n,r){return r.Modules.API=function(o){function s(){return s.__super__.constructor.apply(this,arguments)}return i(s,o),s.prototype.preventClear=!0,s.prototype.className="buzzplayer-idata-container",s.prototype.triggersEvents=["api:loaded","api:got_uuid","error","api:ads_total"],s.prototype.addsStrategies=[["api:getNextCreative",0,"getNextCreative"],["api:addData",0,"addData"],["api:sendEvent",0,"sendEvent"],["api:loadThumbnail",0,"loadThumbnail"],["api:getIframe",0,"getIframe"]],s.prototype.callsStrategies=["api:sendEvent"],s.prototype.handlesEvents={terminated:function(e){if(this.sendedEventsBefore=[],this.firstEvents=["ctor","player_seen"],e)return setTimeout(function(e){return function(){var t;if(null!=(t=e.iframe)?t.parentNode:void 0)return e.iframe.parentNode.removeChild(e.iframe)}}(this),1e3)}},s.prototype.init=function(){var t,i;return this.sendedEventsBefore=[],this.firstEvents=["ctor","player_seen"],t=this.getExtendedDataFromSource(null!=(i=this.core.options)?i.data:void 0),this.allData=(null!=t?t.length:void 0)>0?new Array(t.length):[],this.core.options.parent_core||this.core.options.notSendRequestCtor?(this.core.addStrategy("api:sendEvent",1,function(t){return function(){var i,n,o;if(i=1<=arguments.length?e.call(arguments,0):[],t.core.options.parent_core)return n=function(){switch(this.core.loaded_data.slugname){case null:case void 0:return{};default:return{slugname:this.core.loaded_data.slugname}}}.call(t),i[2]?i[2]=r.utils.extend(i[2],n):i.push(n),null!=(o=t.core.options.parent_core.callStrategy)?o.apply(t.core.options.parent_core,["api:sendEvent"].concat(i)):void 0}}(this)),this.prepareData()):((null!=t?t.event_url:void 0)&&(null!=t?t.content:void 0)&&(null!=t?t.content_type:void 0)&&this.prepareData(),this.loadData()),this.checkTotalAds()},s.prototype.triggerGotUUID=function(e){var t;if(!this.triggeredGotUUID&&e&&"${UUID}"!==e)return t=new Date,t.setFullYear(t.getFullYear()+1),r.utils.setCookie("_buzz_fpc",e,{domain:"."+location.hostname,expires:t}),this.trigger("api:got_uuid",e),this.triggeredGotUUID=!0},s.prototype.loadCustomHtml=function(e){return/^https?:\/\//i.test(this.core.loaded_data.custom_html)?r.utils.loadXHR(url,function(t,i){return t||(this.core.loaded_data.custom_html=i),null!=e&&e()}):null!=e&&e()},s.prototype.loadThumbnail=function(e){var t;return/.*\.gif/i.test(this.core.loaded_data.thumbnail)?(t=new Image,t.setAttribute("crossOrigin","anonymous"),t.onerror=function(){return null!=e&&e()},t.onload=function(i){return function(){var n,r,o;n=document.createElement("canvas"),o=n.width=t.width,r=n.height=t.height,n.getContext("2d").drawImage(t,0,0,o,r);try{i.core.loaded_data.thumbnail_animated=i.core.loaded_data.thumbnail,i.core.loaded_data.thumbnail=n.toDataURL()}catch(s){}return null!=e&&e()}}(this),t.src=this.core.loaded_data.thumbnail):null!=e&&e()},s.prototype.addData=function(e){var t,i;if(i=this.allData.indexOf(this.loadedData),i!==-1)return Array.prototype.splice.apply(this.allData,[i,1].concat(e)),this.loadedData=this.allData[i],t=r.utils.extend({},this.loadedData),t.vastAd=null,this.sendPostMessage({method:"restoreData",loaded_data:t}),this.checkTotalAds()},s.prototype.getExtendedDataFromSource=function(e){var t;return Array.isArray(e)?(t=Math.max(0,this.allData.indexOf(this.loadedData)),t=Math.min(t,e.length-1),e[t]):e},s.prototype.prepareData=function(){var e,i,n,o,s,a,l,u,c,d,h,p,f,m,v,g,y,_,b,w,k,T,x;if(e={},null!=(v=this.loadedData)?v.vastParsed:void 0)e=this.loadedData;else{for(n=[],n.push(this.loadedData,(null!=(g=this.core.options)&&null!=(y=g.parent_core)?y.loaded_data:void 0)||this.getExtendedDataFromSource(t.bzextenddata),this.getExtendedDataFromSource(null!=(_=this.core.options)?_.data:void 0)),o=0,l=n.length;o<l;o++)if(f=n[o]){for(b=["content","extra"],s=0,u=b.length;s<u;s++)m=b[s],f[m]&&(f[m]=function(){try{return r.utils.JSON.parse(f[m])}catch(e){return i=e,f[m]}}());null!=(null!=(w=f.content)?w.main_content:void 0)&&(f.main_content=null!=(k=f.content)?k.main_content:void 0),e=r.utils.extend(e,f)}e=r.utils.extend(e,{custom_html:e.custom_html||"",custom_js:e.custom_js||"",width:parseInt(e.width,10),height:parseInt(e.height,10),branding_template:(null!=(T=e.branding_template)?T.indexOf("/templates/main/"):void 0)===-1?e.branding_template.replace(/^http(s?):/g,r.utils.getProtocol()):"",auto_play:e.auto_play,clickthrough_URL:"clickthrough_URL"in e?e.clickthrough_URL:e.click_event_url,clickthrough_position:"clickthrough_position"in e?e.clickthrough_position:e.landing_link_position,clickthrough_text:"clickthrough_text"in e?e.clickthrough_text:e.landing_link_text,sponsor_logo:"sponsor_logo"in e?e.sponsor_logo:e.logo_url,player_show_skip_button_before_play:!!e.player_show_skip_button_before_play,player_show_skip_button_seconds:+e.player_show_skip_button_seconds,player_show_panels:+e.player_show_panels,overlay_start:"overlay_start"in e?e.overlay_start:e.overlay_start_after,overlay_close:"overlay_close"in e?e.overlay_close:e.overlay_close_after,show_title:"show_title"in e?e.show_title:e.player_show_title}),r.utils.isObject(e.sponsor_logo)&&(e.sponsor_logo_dark=e.sponsor_logo.dark,e.sponsor_logo=e.sponsor_logo.light)}for(this.triggerGotUUID(e.uuid),this.core.loaded_data=e,h=0,d=["loadCustomHtml","loadThumbnail"],x=[],a=0,c=d.length;a<c;a++)p=d[a],this[p]?x.push(this[p](function(e){return function(){if((h+=1)>=d.length)return e.trigger("api:loaded",e.core.loaded_data)}}(this))):x.push(void 0);return x},s.prototype.loadData=function(){var e,t,i,o,s,a,l,u,c,d;return this.id=this.core.params.id+r.utils.guid(),this.iframeDomain=this.core.params.origin,this.initEventHandlerIframe(),c=n.referrer,(null!=c?c.length:void 0)>255&&(c=c.substring(0,255)),c=encodeURIComponent(c),e=null!=(i=r.utils.getCookie("_buzz_fpc"))?i:"",t=this.getExtendedDataFromSource(null!=(o=this.core.options)?o.data:void 0),d=(null!=(s=this.core.options)?s.vpaidJSProxy:void 0)?"vpaid_wrapper":"",null==this.container&&(this.container=this.createContainer()),this.iframe=this.createIframe(this.iframeDomain+"/data_iframe.html?id="+this.id+"&apiUrl="+this.core.params.apiUrl+"&adUrl="+(null!=(a=null!=(l=this.core.options)?l.adUrl:void 0)?a:"")+"&content="+(null!=(u=this.core.params.content)?u:"")+((null!=t?t.event_url:void 0)&&(null!=t?t.content:void 0)&&(null!=t?t.content_type:void 0)?"":"&loaded=1")+"&referrer="+c+"&cookie="+e+"&site="+encodeURIComponent(r.utils.getTopWindow(!0))+"&source="+d,this.container),this.iframe.style.visibility="hidden",this.iframe.style.display="none"},s.prototype.createContainer=function(){var e;return e=n.querySelector("."+this.className),null!=e?e:(e=n.createElement("div"),e.className=this.className,n.body.appendChild(e),e)},s.prototype.getIframe=function(){return this.iframe},s.prototype.getNextCreative=function(){var e;return!!this.allData&&(!!(e=this.allData[1+this.allData.indexOf(this.loadedData)])&&(this.loadedData=e,this.loadedData&&this.sendPostMessage({method:"restoreData",loaded_data:this.loadedData}),setTimeout(function(e){return function(){return e.prepareData()}}(this),1),!0))},s.prototype.checkTotalAds=function(){var e,t,i,n,r,o,s;if(s=null!=(i=null!=(n=this.allData[0])?n.unit_settings:void 0)?i:{},t=null!=(r=null!=(o=s.creatives_amount)?o:s.prerolls_amount)?r:0,e=t>0?Math.min(this.allData.length,t):1,e>0)return this.trigger("api:ads_total",e,this.allData.length)},s.prototype.iframeHandler=function(e,t){if(e)this.trigger("error",e);else switch(t.method){case"onload":this.core.loaded_data&&this.sendPostMessage({method:"restoreData",loaded_data:this.core.loaded_data});break;case"sendEvent":this.core.log("Send event",t.event,t.time,t.params);break;case"loadedData":if(this.loadedData)return;
if(t.error)return[["tracking_url","loadImage"],["tracking_js","loadScript"]].forEach(function(e){var i,n,o,s,a,l,u,c;if(s=e[0],o=e[1],(null!=(a=t.value)?a[s]:void 0)&&r.utils.isArray(t.value[s])){for(l=t.value[s],u=[],i=0,n=l.length;i<n;i++)c=l[i],u.push(r.utils[o](c));return u}}),this.trigger("error",t.error);this.allData=r.utils.isArray(t.value)?t.value:[t.value],this.checkTotalAds(),this.getNextCreative()}},s.prototype.sendEvent=function(e,t,i){var n,o,s,a,l,u,c,d,h,p,f,m;if(null==t&&(t=0),null==i&&(i={}),+t>10)return this.trigger("error","not send undocumented event "+e+"/"+t);if(o=null!=(c=null!=(d=this.core)?d.loaded_data:void 0)?c:null,n=null!=(h=null!=o?o.auction_settings:void 0)?h:null,this.firstEvents.length>0&&"clickunder"!==(null!=o?o.content_type:void 0)){for(p=this.firstEvents,s=a=0,l=p.length;a<l;s=++a)if(u=p[s],u===e){this.firstEvents.splice(s,1);break}if(s>0)return(null!=this.sendedEventsBefore?this.sendedEventsBefore:this.sendedEventsBefore=[]).push([e,t,i])}return this.sendedEventsBefore&&(m=r.utils.extend(this.sendedEventsBefore),this.sendedEventsBefore=null,m.length>0&&setTimeout(function(e){return function(){var t,i,n,r;for(r=[],i=0,n=m.length;i<n;i++)t=m[i],r.push(e.sendEvent.apply(e,t));return r}}(this),0)),(null!=(f=this.core.params.version)?f.timestamp:void 0)&&(i.version=this.core.params.version.timestamp),null!=(null!=o?o.extra:void 0)&&r.utils.isObject(o.extra)&&(i=r.utils.extend(i,o.extra)),"player_seen"!==e&&"mrc_vvi"!==e&&"mrc_dvi"!==e||(t=0),null!=n&&r.utils.isObject(n)&&e===n.event_name&&t===n.time_slice&&(i=r.utils.extend(i,{cur:n.currency,price:n.price})),this.sendPostMessage({method:"sendEvent",event:e,time:t,params:i})},s}(r.Modules.BaseModule),r.Modules.Mixins.Iframe(r.Modules.API.prototype)}(window,document,Buzzoola),function(e,t,n){return n.Modules.Branding=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.triggersEvents=["warning","remote_module_ready","branding:loaded"],t.prototype.handlesEvents={remote_module_ready:function(){return this.trigger("branding:loaded"),this.stopTimeoutTriggerRemoteModuleReady()},terminated:function(){return this.stopTimeoutTriggerRemoteModuleReady()}},t.prototype.init=function(){var e;return this.core.loaded_data.branding_template?(this.brandingUrl=this.core.loaded_data.branding_template,"/"!==this.brandingUrl.slice(-1)&&(this.brandingUrl+="/"),this.jsUrl=this.brandingUrl+"index.js",e=this.brandingUrl.split("/"),this.brandingModuleName=e[e.length-2],n.utils.loadScript(this.jsUrl,function(e){return function(t){var i;return t?(e.trigger("warning","not loaded "+e.jsUrl),e.trigger("remote_module_ready")):(i={},i[e.brandingModuleName]=!0,e.startTimeoutTriggerRemoteModuleReady(),n.utils.initModules(e.core,i))}}(this))):this.trigger("remote_module_ready")},t.prototype.startTimeoutTriggerRemoteModuleReady=function(){return this.stopTimeoutTriggerRemoteModuleReady(),this.timeoutTriggerRemoteModuleReady=setTimeout(function(e){return function(){return e.trigger("remote_module_ready")}}(this),3e3)},t.prototype.stopTimeoutTriggerRemoteModuleReady=function(){return clearTimeout(this.timeoutTriggerRemoteModuleReady)},t}(n.Modules.BaseModule)}(window,document,Buzzoola),function(e,t,n){return n.Modules.DefaultSize=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.addsStrategies=[["get_video_size",0,function(e,t){return{width:e,height:t}}]],t}(n.Modules.BaseModule)}(window,document,Buzzoola),function(e,t,n){return n.Modules.Destroy=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.addsStrategies=[["destroy",0,"destroy"],["collapse",0,"collapse"]],t.prototype.destroy=function(){var e,t;if(this.core.container)return this.core.container===this.core.embed_container?(this.core.wrap_html&&this.core.wrap_html.parentElement&&this.core.container.removeChild(this.core.wrap_html),this.core.container.style.width=this.core.container.style.height=""):(null!=(e=this.core)&&null!=(t=e.container)?t.parentNode:void 0)?this.core.container.parentNode.removeChild(this.core.container):void 0},t.prototype.collapse=function(e){return this.core.wrap_html.style.height=n.utils.getPropertyValue(this.core.wrap_html,"height"),this.core.wrap_html.style.overflow="hidden",n.utils.transitionHeight(this.core.wrap_html,"0",function(t){return function(){if(e)return t.core.destroy()}}(this))},t}(n.Modules.BaseModule)}(window,document,Buzzoola),function(e,t,n){return n.Modules.Loader=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.preventClear=!0,n.prototype.handlesEvents={got_container:function(){if(!this.el)return this.draw()},"resize:before":function(e,t){return this.resize(e,t)},"overroll:shown":function(){return this.hide()},destroyed:function(){return this.hide()},"event:state":function(e){var t;if("ready"===e)return t=this.core.params,t.overroll?void 0:this.hide()},"tube:reload":function(){if(this.core.currentAd>=1&&this.core.readyFirstTime)return this.show(!0)}},n.prototype.addsStrategies=[["loader:show",0,"show"],["loader:hide",0,"hide"],["loader:getElement",0,"getLoader"]],n.prototype.init=function(){return this.initialWidth=this.initialHeight=0},n.prototype.resize=function(e,t){return null==e&&(e=this.initialWidth),null==t&&(t=this.initialHeight),null!=this.el?(this.el.style.width=e+"px",this.el.style.height=t+"px"):(this.initialWidth=e,this.initialHeight=t)},n.prototype.getLoader=function(){return this.el},n.prototype.draw=function(){return this.el=t.createElement("div"),this.el.className="buzz-loader",this.el.style.backgroundImage="url('"+this.core.params.origin+"/img/loader.gif')",this.resize(),this.shown?this.show(!0):this.hide(!0),this.core.container.appendChild(this.el)},n.prototype.show=function(e){var t;if(null==e&&(e=!1),!this.shown||e)return this.core.container.style.height=this.el.style.height,clearTimeout(this.hideTimeout),this.shown=!0,null!=(t=this.el)?t.style.display="block":void 0},n.prototype.hide=function(e){if(null==e&&(e=!1),this.shown||e)return clearTimeout(this.hideTimeout),this.core.container.style.height="inherit",this.hideTimeout=setTimeout(function(e){return function(){var t;return e.shown=!1,null!=(t=e.el)?t.style.display="none":void 0}}(this),0)},n}(n.Modules.BaseModule)}(window,document,Buzzoola),function(e,t,n){return n.Modules.MrcImpChecker=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.prototype.triggersEvents=["mrc:displayed","mrc:played"],t.prototype.addsStrategies=[["mrc:reset_behavior",0,"resetBehavior"]],t.prototype.callsStrategies=["api:sendEvent"],t.prototype.handlesEvents={"core:ads_loaded":function(){return this.resetBehavior(this.core.params.behavior)},"engagement:seen":function(){return this.localSeen=!0,this.startDisplayMeasure()},"engagement:unseen":function(){return this.localSeen=!1,this.stopDisplayMeasure()},"event:time":function(e){var t;if(!this.playingAchieved&&(e=1e3*e,t=e-this.playingLastTime,this.playingLastTime=e,this.core.state.seen&&this.parentSeen))return this.playingMeasured+=t,this.playingMeasured>=this.playingTarget?(this.playingAchieved=!0,this.trigger("mrc:played")):void 0},terminated:function(){return this.clearDisplayData()}},t.prototype.init=function(){var e,t;return this.resetBehavior(this.core.params.behavior),this.parentSeen=null==(e=null!=(t=this.core.options)?t.parent_core:void 0)||(e.on("engagement:seen",function(e){return function(){return e.parentSeen=!0,e.startDisplayMeasure()}}(this)),e.on("engagement:unseen",function(e){return function(){return e.localSeen=!1,e.stopDisplayMeasure()}}(this)),!1),this.visibilityTarget=1e3,this.visibilityMeasured=0,this.visibilityAchieved=!1,this.playingTarget=2e3,this.playingLastTime=0,this.playingMeasured=0,this.playingAchieved=!1},t.prototype.resetBehavior=function(e){var t,i;if(null!=e)return this.behavior=e,"video"===this.behavior&&this.clearDisplayData(),null!=(t=this.core.options)&&null!=(i=t.parent_core)?i.callStrategy("mrc:reset_behavior",this.behavior):void 0},t.prototype.startDisplayMeasure=function(){if(this.localSeen&&this.parentSeen&&!this.visibilityAchieved&&"video"!==this.behavior)return this.visibilityLastStart=Date.now(),this.visibilityTimeout=setTimeout(function(e){return function(){return e.markDisplay()}}(this),this.visibilityTarget-this.visibilityMeasured)},t.prototype.stopDisplayMeasure=function(){if(null!=this.visibilityLastStart&&(this.visibilityMeasured=Date.now()-this.visibilityLastStart),this.clearDisplayData(),this.visibilityMeasured>this.visibilityTimeout)return this.markDisplay()},t.prototype.markDisplay=function(){if(this.visibilityAchieved=!0,"video"!==this.behavior)return this.trigger("mrc:displayed")},t.prototype.clearDisplayData=function(){return this.visibilityLastStart=null,clearTimeout(this.visibilityTimeout)},t}(n.Modules.BaseModule)}(window,document,Buzzoola),function(e,t,n){return n.Modules.UserEngagement=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.triggersEvents=["engagement:seen","engagement:seenFirstTime","engagement:unseen","engagement:user_left_page","engagement:user_page_back"],r.prototype.callsStrategies=["resize:calcHeight","fullscreen:active"],r.prototype.addsStrategies=[["engagement:disableListener",0,"disableListener"],["engagement:enableListenerForLeavePage",0,"enableListenerForLeavePage"],["engagement:enableListenerForVisibility",0,"enableListenerForVisibility"]],r.prototype.handlesEvents={"before:destroyed":function(){return this.disableAllListener()},"fullscreen:shown":function(){return this.fullscreenShown=!0},"window:scroll":function(e){this.isScrolling=e},"widget:pinned":function(e){this.pinned=e}},r.prototype.init=function(){return this.events={},this.percentSeen=50,this.percentUnseen=5,this.seenFirstTime=!0,this.baseRect={x:0,y:0,left:0,right:0,top:0,bottom:0,height:0,width:0}},r.prototype.isVisible=function(t,i,n,r){var o,s,a,l,u,c,d,h,p,f,m,v,g,y;if(null==i&&(i=e),null==n&&(n=this.core.wrap_html),null==r&&(r=this.baseRect),i===e){if("fullscreen"===this.core.state.format&&!this.fullscreenShown)return!1;if(this.pinned||this.callStrategy("fullscreen:active"))return!0}if(l=i!==e,s=i.document,v=s.documentElement.scrollTop||s.body.scrollTop,m=s.documentElement.scrollHeight||s.body.scrollHeight,d=s.documentElement.offsetHeight||s.body.offsetHeight,m&&!isNaN(m)&&(d=Math.max(d,m)),o=s.documentElement.clientHeight||s.body.clientHeight,i.innerHeight&&!isNaN(i.innerHeight)&&(o=Math.min(o,i.innerHeight)),v+=o,c=null!=n&&null!=(p=n.getClientRects())?p[0]:void 0){h={};for(u in c)g=c[u],"height"!==u&&(h[u]=g+r[u]);return h.height=a=l?r.height||Math.abs(h.bottom-h.top):this.callStrategy("resize:calcHeight"),y=!h||h.bottom<0||h.top>o?0:h.top>0?v>=d&&h.top+a>v?100:Math.min(100,100-100*(h.top+a-o)/a):100*(h.top+a)/a,f=y>=t&&(l||!this.core.container.classList.contains("buzz-invisible")),i.parent!==i&&f?this.isParentVisible(i,h):f}return!1},r.prototype.isParentVisible=function(t,i){var r,o,s;return null==t&&(t=e),i||(i=t===e?null!=(o=this.core.wrap_html)&&null!=(s=o.getClientRects())?s[0]:void 0:this.baseRect),r=n.utils.getCurrentFrame(t),null==r?(this.warned||(this.core.trigger("warning","could not get frame while checking visibility"),this.warned=!0),!0):this.isVisible(this.percentSeen,t.parent,r,i)},r.prototype.disableListener=function(e){if(this.events[e])return"user_left_page"===e?n.utils.remove_page_visibility_listener(this.events[e]):n.utils.isFunction(this.events[e])&&"visibility"===e&&clearInterval(this.visibilityTimer),this.events[e]=null},r.prototype.disableAllListener=function(){var e,t;t=[];for(e in this.events)t.push(this.disableListener(e));return t},r.prototype.enableListenerForVisibility=function(){if(!this.events.visibility)return this.events.visibility=function(e){return function(){var t;if(!e.isScrolling)return t=e.isVisible(e.percentSeen)&&null!=e.core.widget_div,e.core.state.seen!==t?(e.core.state.seen=t,t?(e.seenFirstTime&&(e.seenFirstTime=!1,e.trigger("engagement:seenFirstTime")),e.trigger("engagement:seen")):e.trigger("engagement:unseen")):void 0}}(this),this.visibilityTimer=setInterval(this.events.visibility,100),this.events.visibility()},r.prototype.enableListenerForLeavePage=function(){if(!this.events.user_left_page)return this.events.user_left_page=n.utils.add_page_visibility_listener(function(e){return function(t){return"hidden"===t?e.trigger("engagement:user_left_page"):e.trigger("engagement:user_page_back")}}(this))},r}(n.Modules.BaseModule)}(window,document,Buzzoola),function(t,n,r){return r.Modules.VAST=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.callsStrategies=["api:addData","api:loadThumbnail","widget:getTotalTime"],n.prototype.triggersEvents=["vast:loaded","error"],n.prototype.handlesEvents={"event:player_seen_first_time":function(){var e;if(!(null!=(e=this.core.options)?e.vpaidJSProxy:void 0)||"application/javascript"===this.core.loaded_data.content.mimeType)return this.trackEvent("load")},"event:time":function(e){return this.trackEvent("setProgress",e)},"widget:state_changed":function(e){var t,i;switch(e){case"start":if((null!=(t=this.core.options)?t.vpaidJSProxy:void 0)&&"application/javascript"!==this.core.loaded_data.content.mimeType)return this.trackEvent("load");break;case"play":if(this.pause)return this.trackEvent("setPaused",this.pause=!1);break;case"pause":return this.trackEvent("setPaused",this.pause=!0);case"finish":return this.trackEvent("complete");case"duration":if((null!=(i=this.tracker)?i.assertDuration:void 0)>0)return;return this.tracker&&this.tracker.setDuration(this.callStrategy("widget:getTotalTime"))}},"widget:volume_changed":function(e){return this.trackEvent("setMuted",!e)},"widget:fullscreenchange":function(e){return this.trackEvent("setFullscreen",e)},"clickthrough_URL:click":function(){return this.trackEvent("click")},"close_button:click":function(){return this.trackEvent("skip")},error:function(){return this.trackEvent("errorWithCode",400)}},n.prototype.mimeTypes={"audio/mpeg":1,"audio/mp3":1,"audio/ogg":1,"video/x-flv":2,"video/ogg":3,"video/webm":4,"application/x-shockwave-flash":5,"video/mp4":6,"application/javascript":7},n.prototype.contentTypes={video_url:["audio/mpeg","audio/mp3","audio/ogg","video/ogg","video/webm","video/mp4"],vpaid:["application/x-shockwave-flash","video/x-flv","application/javascript"]},n.prototype.init=function(){return this.pause=!1,this.sendedEventsBeforePlayerSeen=[],this.baseExtPaths={title:"nativetext.title",sponsor_logo:"nativetext.image",description:"nativetext.description",action_button_title:"cta.text",clickthrough_text:"cta.text"},this.creatives=[],this.core.loaded_data.vastParsed?this.onLoadVASTTag():(this.core.loaded_data.main_content=this.core.loaded_data.main_content.replace(/\[DL\]/g,r.utils.getTopWindow()),this.loadVASTTag(function(e){return function(t){return e.onLoadVASTTag(t)}}(this)))},n.prototype.onLoadVASTTag=function(e){var t,i,n,r,o;if(this.creatives.length>0){for(this.creatives.length>1&&this.callStrategy("api:addData",this.creatives),o=this.creatives,n=0,r=o.length;n<r;n++)i=o[n],this.changeLoadedData(i);this.core.loaded_data.vastParsed||(this.core.loaded_data=this.creatives[0])}return null!=(t=this.core.loaded_data.vastAd)&&(this.mediaFile=t.mediaFile,this.tracker=t.tracker,this.icon=t.icon),this.icon?this.callStrategy("api:loadThumbnail",function(e){return function(){return e.trigger("vast:loaded")}}(this)):this.trigger.apply(this,e?["error","not found mediaFile in vast tag"]:["vast:loaded"])},n.prototype.loadVASTTag=function(e){return r.utils.DMVAST.client.get(this.core.loaded_data.main_content,{withCredentials:!0},function(t){return function(i,n,o){var s,a,l,u,c,d,h,p,f,m,v,g,y,_,b,w,k,T,x,A,E,S;if(n)for(w=n.ads,h=0,m=w.length;h<m;h++){for(s=w[h],a={},(null!=(k=S=t.core.loaded_data.content.ignore_impression)?k.length:void 0)>0&&(c=function(){try{return new RegExp(S)}catch(e){return null}}(),null!=c&&(s.impressionURLTemplates=s.impressionURLTemplates.filter(function(e){return!c.test(e)}))),T=s.creatives,p=0,v=T.length;p<v;p++)switch(l=T[p],l.type){case"linear":for(x=l.mediaFiles,f=0,g=x.length;f<g;f++)_=x[f],(null!=_&&null!=(A=_.fileURL)?A.length:void 0)>0&&t.mimeTypes[_.mimeType]&&(a.mediaFile?a.mediaFile.mimeType===_.mimeType?t.compareRates(a.mediaFile,_)&&(a.mediaFile=_):1===t.compareMimes(_,a.mediaFile)&&(a.mediaFile=_):a.mediaFile=_);for(a.adParameters=l.adParameters,E=l.icons,b=0,y=E.length;b<y;b++){d=E[b],a.icon=d.fileURL;break}a.ad=s,a.tracker=new r.utils.DMVAST.tracker(s,l)}a.mediaFile&&(u=r.utils.extend({},t.core.loaded_data,{vastAd:a,vastParsed:!0}),t.creatives.length>0&&(u.extra.seq_marker=t.creatives.length),t.creatives.push(u))}return null!=t.core.loaded_data.creative_data_to_save&&t.saveCreative(o),!t.core.loaded_data.content.allow_multiple_creatives&&t.creatives.length>1&&(t.creatives=t.creatives.sort(function(e,i){var n,r,o;return r=e.vastAd.mediaFile,o=i.vastAd.mediaFile,n=t.compareMimes(r,o),0===n?t.compareRates(r,o):n*-1}).slice(0,1)),e("boolean"==typeof i&&i&&t.core.loaded_data.content.ignoreCORS?!1:i>=400||i||0===t.creatives.length)}}(this))},n.prototype.compareMimes=function(e,t){return this.mimeTypes[e.mimeType]-this.mimeTypes[t.mimeType]},n.prototype.compareRates=function(e,t){var i,n;return i=parseInt(e.bitrate,10),n=parseInt(t.bitrate,10),r.utils.bowser.mobile||r.utils.bowser.tablet?i-n:n-i},n.prototype.changeLoadedData=function(e){var t,i,n,o,s,a,l;l=e.vastAd,n=this.contentTypes;for(t in n)if(i=n[t],i.indexOf(l.mediaFile.mimeType)!==-1){e.content_type=t;break}if(r.utils.extend(e.content,{main_content:e.main_content=e.vastAd.mediaFile.fileURL,mimeType:e.vastAd.mediaFile.mimeType}),l.adParameters&&(e.content.adParameters=l.adParameters),"audio/mpeg"!==(o=l.mediaFile.mimeType)&&"audio/mp3"!==o&&"audio/ogg"!==o||(e.click_event_view="plank",e.clickthrough_position="bottom",e.overlay_start=0,e.overlay_close=20,e.player_show_panels=!1,!l.icon&&/tube\.buzzoola\.com\/thumbnails\/default_thumbnail\.png/.test(e.thumbnail)&&(l.icon=this.core.params.origin+"/img/audioroll_thumbnail.gif")),l.icon&&(e.thumbnail=l.icon),e.player_show_skip_button_seconds=function(){switch(l.tracker.skipDelay){case null:return e.player_show_skip_button_seconds;case-1:return 0;default:return l.tracker.skipDelay}}(),(null!=(s=l.tracker)?s.assetDuration:void 0)&&(e.duration=l.tracker.assetDuration),(null!=(a=l.tracker)?a.clickThroughURLTemplate:void 0)&&(e.clickthrough_URL=l.tracker.clickThroughURLTemplate),e.content.use_extensions)return this.extractDataFromExtensions(e)},n.prototype.extractDataFromExtensions=function(e){var t,i,n,r,o,s,a,l,u,c,d;if(n=null!=(a=e.vastAd.ad.extensions)?a:[],0!==n.length){s=null!=(l=e.content.ext_paths)?l:this.baseExtPaths,u=[];for(r in s)if(d=s[r],o=d.split("."),i=o[0],o=o.slice(1),t=n.filter(function(e){return e.type===i})[0],null!=t){for(;null!=(c=o.shift())&&null!=t;)t=t[c];u.push(e[r]=null!=t?t:"")}else e[r]="";return u}},n.prototype.saveCreative=function(e){var t,i,n,o,s;return s=this.core.loaded_data.creative_data_to_save,o=s.key,t=s.creative_id,i=function(){try{return(new XMLSerializer).serializeToString(e)}catch(t){return n=t,null===e?"null":void 0===e?"undefined":e.toString()}}(),r.utils.loadXHR(this.core.params.apiUrl+"/dsp_content/"+o+"/"+t,function(e){},{withCredentials:!0,timeout:3e3},"POST",null,i)},n.prototype.trackEvent=function(){var t,i,n,o,s;if(i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],null!=this.sendedEventsBeforePlayerSeen){if("load"!==i&&"clickunder"!==(null!=(n=this.core)&&null!=(o=n.loaded_data)?o.content_type:void 0))return this.sendedEventsBeforePlayerSeen.push([i].concat(t));s=r.utils.extend(this.sendedEventsBeforePlayerSeen),this.sendedEventsBeforePlayerSeen=null,setTimeout(function(e){return function(){var t,i,n,r;for(r=[],i=0,n=s.length;i<n;i++)t=s[i],r.push(e.trackEvent.apply(e,t));return r}}(this),0)}if(this.mediaFile&&this.tracker&&this.tracker[i])return this.tracker[i].apply(this.tracker,t)},n}(r.Modules.BaseModule)}(window,document,Buzzoola),function(e,t,n){return n.Modules.WeboramaUserTracker=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,t),r.prototype.triggersEvents=["warning"],r.prototype.handlesEvents={"api:got_uuid":function(e){return this.loadScript(e)}},r.prototype.loadScript=function(t){var i,r,o,s;try{s=parseInt((null!=(i=e.localStorage)?i.getItem("buzz_weborama_user"):void 0)||0,10),o=null!=(r=e.localStorage)?r.getItem("buzz_weborama_data"):void 0}catch(a){}if(o)try{this.core.weboramaData=o=JSON.parse(n.utils.Base64.decode(o))}catch(a){}if(Date.now()-s>864e5||0===s||!o)return n.utils.loadXHR(this.core.protocol+"//wam.solution.weborama.fr/fcgi-bin/dispatch.fcgi?d.A=prd&d.key=eGVdzGnHzEYK&d.format=json&d.qu=1",function(t){return function(i,r){var o;if(i||!r)return t.logError();try{null!=(o=e.localStorage)&&o.setItem("buzz_weborama_data",n.utils.Base64.encode(r)),t.core.weboramaData=t.numToString(JSON.parse(r))}catch(s){}return n.utils.loadXHR(t.core.params.apiUrl+"/weborama",function(i,n){var r;if(i)return t.logError();try{return null!=(r=e.localStorage)?r.setItem("buzz_weborama_user",Date.now()):void 0}catch(o){}},{withCredentials:!0},"POST",{"Content-type":"text/plain"},JSON.stringify(t.core.weboramaData))}}(this),{withCredentials:!0})},r.prototype.logError=function(){return this.trigger("warning","weborama fail")},r.prototype.numToString=function(e){var t,i,r,o,s,a,l;if(n.utils.isObject(e)){t={};for(o in e)l=e[o],t[o]=this.numToString(l);return t}if(n.utils.isArray(e)){for(a=[],r=0,s=e.length;r<s;r++)i=e[r],a.push(this.numToString(i));return a}return e===parseInt(e,10)||e===parseFloat(e)?""+e:e},r}(n.Modules.BaseModule)}(window,document,Buzzoola),function(e,t,i){var n,r,o,s,a,l,u,c,d,h,p;for(n=e.BUZZOOLA=e.BUZZOOLA||{players:[],hosted:"function"===e.getRealHost&&encodeURIComponent(e.getRealHost())||encodeURIComponent(e.location.href),referrer:encodeURIComponent(t.referrer||"unknown"),destroyed_players:[]},n.places=t.querySelectorAll(".buzzplayer-stage"),s=function(e,t){var i,r;for(null==t&&(t=n.players),i=0,r=t.length;i<r;){if(t[i].embed_container===e)return i;i++}return-1},a=0,c=n.places.length,p=[];a<c;){if(o=n.places[a],s(o)===-1&&s(o,n.destroyed_players)===-1)if(d=new i.Core(o),d.on("destroyed",function(){var e;if(e=s(this.embed_container),e!==-1)return n.destroyed_players.push({embed_container:this.embed_container}),n.players.splice(e,1)},!0),n.players.push(d),i.utils.isFunction(e.onBuzzoolaPlayerReady))e.onBuzzoolaPlayerReady(d);else if(i.utils.isArray(e.onBuzzoolaPlayerReady))for(h=e.onBuzzoolaPlayerReady,l=0,u=h.length;l<u;l++)r=h[l],i.utils.isFunction(r)&&r(d);p.push(a++)}return p}(window,document,Buzzoola)}.call(this);